<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>杂项/ubuntu20.04安装StarUML2</title>
      <link href="/2020/07/16/%E6%9D%82%E9%A1%B9/ubuntu20.04%E5%AE%89%E8%A3%85StarUML2/"/>
      <url>/2020/07/16/%E6%9D%82%E9%A1%B9/ubuntu20.04%E5%AE%89%E8%A3%85StarUML2/</url>
      
        <content type="html"><![CDATA[<h1 id="ubuntu20-04安装StarUML2"><a href="#ubuntu20-04安装StarUML2" class="headerlink" title="ubuntu20.04安装StarUML2"></a>ubuntu20.04安装StarUML2</h1><h2 id="存在的问题"><a href="#存在的问题" class="headerlink" title="存在的问题"></a>存在的问题</h2><ul><li><a href="http://staruml.io/download" target="_blank" rel="noopener">StarUML官网下载地址</a> 提供的最新StarUML3只有AppImage格式的，需要wine才行。所以我选择的是StarUML2。</li><li>StarUML2依赖libgcrypt11和libcurl3。libgcrypt11是ubuntu14.04的依赖库，可以去找deb包解决；而libcurl3不行，由于curl依赖libcurl4，libcurl3和libcurl4冲突，安装libcurl3会导致curl的卸载，从而导致transmission的卸载。</li></ul><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><p>1、下载StarUML2的deb和libgcrypt11依赖的deb。</p><p><a href="http://staruml-7a0.kxcdn.com/releases-v2/StarUML-v2.8.1-64-bit.deb" target="_blank" rel="noopener">StarUML2官网下载地址</a> </p><p><a href="http://launchpadlibrarian.net/375021363/libgcrypt11_1.5.3-2ubuntu4.6_amd64.deb" target="_blank" rel="noopener">libgcrypt11下载地址</a> </p><p>libgcrypt11还依赖multiarch-support，<a href="http://launchpadlibrarian.net/416685704/multiarch-support_2.19-0ubuntu6.15_amd64.deb" target="_blank" rel="noopener">multiarch-support的下载地址</a> </p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cd到下载目录中，然后执行安装命令</span></span><br><span class="line">sudo apt-get install ./multiarch-support_2.19-0ubuntu6.15_amd64.deb</span><br><span class="line">sudo apt-get install ./libgcrypt11_1.5.3-2ubuntu4.6_amd64.deb</span><br></pre></td></tr></table></figure><p>2、改变curl的版本，使得它同时支持libcurl3和libcurl4。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 这是别人自己重新打包的一个curl版本。</span></span><br><span class="line"><span class="comment"># 原理也很简单，就是让apt-get把libcurl3解释为libcurl4，这样当apt-get要检索starUML依赖的libcurl3时，就会检索到已安装的libcurl4，这样就不会提示找不到依赖了。对于使用没有影响。</span></span><br><span class="line">sudo add-apt-repository ppa:xapienz/curl34</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install curl</span><br></pre></td></tr></table></figure><p>3、依赖问题都解决了，就能安装StarUML2了。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cd到下载目录中，然后执行安装命令</span></span><br><span class="line">sudo apt-get install ./StarUML-v2.8.1-64-bit.deb</span><br></pre></td></tr></table></figure><h2 id="破解"><a href="#破解" class="headerlink" title="破解"></a>破解</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修改验证脚本</span></span><br><span class="line">sudo vi /opt/staruml/www/license/node/LicenseManagerDomain.js</span><br></pre></td></tr></table></figure><p>破解的原理也比较简单：</p><p>对于starUML的验证函数，直接返回一个license信息。这样starUML就会认为你已经有了一个有效的license。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在函数validate中添加内容：</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">validate</span>(<span class="params">PK, name, product, licenseKey</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> pk, decrypted;</span><br><span class="line"><span class="comment">// 破解 - 开始</span></span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">name:<span class="string">"test"</span>,</span><br><span class="line">        product:<span class="string">"StartUML"</span>,</span><br><span class="line">        licenseType:<span class="string">"vip"</span>,</span><br><span class="line">        quantity:<span class="string">"staruml.io"</span>,</span><br><span class="line">        licenseKey:<span class="string">"starumllicense"</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// 破解 - 结束</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        pk = <span class="keyword">new</span> NodeRSA(PK);</span><br><span class="line">        decrypted = pk.decrypt(licenseKey, <span class="string">'utf8'</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> terms = decrypted.trim().split(<span class="string">"\n"</span>);</span><br><span class="line">    <span class="keyword">if</span> (terms[<span class="number">0</span>] === name &amp;&amp; terms[<span class="number">1</span>] === product) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123; </span><br><span class="line">            name: name, </span><br><span class="line">            product: product, </span><br><span class="line">            licenseType: terms[<span class="number">2</span>],</span><br><span class="line">            quantity: terms[<span class="number">3</span>],</span><br><span class="line">            licenseKey: licenseKey</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> 杂项 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>杂项/利用清华镜像站来汉化eclipse</title>
      <link href="/2020/06/12/%E6%9D%82%E9%A1%B9/%E5%88%A9%E7%94%A8%E6%B8%85%E5%8D%8E%E9%95%9C%E5%83%8F%E7%AB%99%E6%9D%A5%E6%B1%89%E5%8C%96eclipse/"/>
      <url>/2020/06/12/%E6%9D%82%E9%A1%B9/%E5%88%A9%E7%94%A8%E6%B8%85%E5%8D%8E%E9%95%9C%E5%83%8F%E7%AB%99%E6%9D%A5%E6%B1%89%E5%8C%96eclipse/</url>
      
        <content type="html"><![CDATA[<p>eclipse官方的镜像比较慢，所以采用国内的tuna镜像。</p><h1 id="查看eclipse版本"><a href="#查看eclipse版本" class="headerlink" title="查看eclipse版本"></a>查看eclipse版本</h1><p>eclipse点击help-&gt;about eclipse查看版本<br><img src="https://img-blog.csdnimg.cn/20200612180206159.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk3MjkxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>我这里是2020-3版本</p><h1 id="登录官网语言包"><a href="#登录官网语言包" class="headerlink" title="登录官网语言包"></a>登录官网语言包</h1><p>地址：<a href="http://www.eclipse.org/babel/downloads.php" target="_blank" rel="noopener">http://www.eclipse.org/babel/downloads.php</a></p><h1 id="找到对应的包的地址"><a href="#找到对应的包的地址" class="headerlink" title="找到对应的包的地址"></a>找到对应的包的地址</h1><p>这里有3个版本，好像没有2020-3版本的语言包，那就选2019-12版本。（可能会有兼容性问题，自行选择是否要尝试）<br>注意这个地址，接下来就要打开清华的镜像了。<br><img src="https://img-blog.csdnimg.cn/20200612180357442.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk3MjkxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="找到清华镜像地址"><a href="#找到清华镜像地址" class="headerlink" title="找到清华镜像地址"></a>找到清华镜像地址</h1><p>打开地址：<a href="https://mirrors.tuna.tsinghua.edu.cn/eclipse/technology/babel/update-site" target="_blank" rel="noopener">https://mirrors.tuna.tsinghua.edu.cn/eclipse/technology/babel/update-site</a><br>找到刚才的链接对应的那个位置，一路找下去就行。<br><img src="https://img-blog.csdnimg.cn/20200612180609437.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk3MjkxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20200612180704515.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk3MjkxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>就是这个网址：<br><img src="https://img-blog.csdnimg.cn/20200612180741347.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk3MjkxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="使用镜像地址安装语言包"><a href="#使用镜像地址安装语言包" class="headerlink" title="使用镜像地址安装语言包"></a>使用镜像地址安装语言包</h1><p>然后eclise打开 Help-&gt;Install New Software，点击add<br><img src="https://img-blog.csdnimg.cn/20200612181009646.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk3MjkxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><p>名称这里随便填，位置这里填之前找到的清华的网址。然后点添加。<br><img src="https://img-blog.csdnimg.cn/2020061218103994.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk3MjkxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>Work with 这里选中刚才添加的url，等待它加载一会儿。<br><img src="https://img-blog.csdnimg.cn/20200612181219378.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk3MjkxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>然后在出现的选项里选择这个：<br><img src="https://img-blog.csdnimg.cn/20200612181311125.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk3MjkxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>之后就点下一步，各种确定安装就行。<br>右下角会显示安装进度：<br><img src="https://img-blog.csdnimg.cn/20200612181443442.png" alt="在这里插入图片描述"></p><p>如果出现这种提示，选择Install anyway就行。<br><img src="https://img-blog.csdnimg.cn/20200612180934431.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk3MjkxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>之后eclipse会提示重启eclipse，重启就能看到汉化效果了。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 杂项 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>杂项/我与pyinstaller战斗的一天后的总结</title>
      <link href="/2020/05/13/%E6%9D%82%E9%A1%B9/%E6%88%91%E4%B8%8Epyinstaller%E6%88%98%E6%96%97%E7%9A%84%E4%B8%80%E5%A4%A9%E5%90%8E%E7%9A%84%E6%80%BB%E7%BB%93/"/>
      <url>/2020/05/13/%E6%9D%82%E9%A1%B9/%E6%88%91%E4%B8%8Epyinstaller%E6%88%98%E6%96%97%E7%9A%84%E4%B8%80%E5%A4%A9%E5%90%8E%E7%9A%84%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<h1 id="遇到的打包不成功的原因"><a href="#遇到的打包不成功的原因" class="headerlink" title="遇到的打包不成功的原因"></a>遇到的打包不成功的原因</h1><p>1、setuptools的版本太高，出现脚本执行失败的错误<br>2、第三方库有自己用到的其它文件，比如 .json .txt .html，pyinstaller打包的时候不会检测这些文件，出现找不到文件的错误<br>3、缺少一些库，比如 pypiwin32之类的与系统相关类库</p><h1 id="解决方式"><a href="#解决方式" class="headerlink" title="解决方式"></a>解决方式</h1><p>这应该能解决大多数问题<br>1、尝试将setuptools降低至44.0.0版本<br>1、pyinstaller打包时候不要用-F选项，这样有路径问题可以自行解决<br>2、打包时候可以用-c选项显示命令框，以便查看报错信息查错，确认无错后再用-w选项屏蔽命令框<br>3、报错显示找不到文件的话，去库文件里找到这些文件，然后复制粘贴到对应的报错路径下。建议将这个目录下的文件都放过去，第三方库用到的文件一般都在这里。<br>4、打包前将上次打包产生的文件全部删掉</p><h1 id="战斗的过程"><a href="#战斗的过程" class="headerlink" title="战斗的过程"></a>战斗的过程</h1><h2 id="jieba"><a href="#jieba" class="headerlink" title="jieba"></a>jieba</h2><p>打包运行后报错：<br><img src="https://img-blog.csdnimg.cn/20200513092351638.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk3MjkxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>可以看到是缺少了dict.txt文件，dist/app是我们生成的exe的位置，只要在这里建立一个jieba文件夹，再把dict.txt复制过来就行。</p><p><img src="https://img-blog.csdnimg.cn/20200513092544634.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk3MjkxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>可以看到在sites-packages/jieba目录下找到了dict.txt文件，把它复制过去在运行试试<br><img src="https://img-blog.csdnimg.cn/20200513092804972.png" alt="在这里插入图片描述"><br>报错信息已经改变，我们再去找idf.txt文件<br>找到后再放到报错信息所指的目录下<br><img src="https://img-blog.csdnimg.cn/20200513092842872.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk3MjkxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>问题解决！</p><h2 id="pyecharts"><a href="#pyecharts" class="headerlink" title="pyecharts"></a>pyecharts</h2><p>打包运行后报错：<br><img src="https://img-blog.csdnimg.cn/20200513093002929.png" alt="在这里插入图片描述"><br>还是找到对应文件<br><img src="https://img-blog.csdnimg.cn/20200513093120568.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk3MjkxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>可以看到json文件不只一个，我们全部复制过去，py文件不要复制</p><p>再次运行报错：<br><img src="https://img-blog.csdnimg.cn/20200513094621706.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk3MjkxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>再找到对应文件，可以看到有很多，而且都不是py文件，那就全部复制过去<br><img src="https://img-blog.csdnimg.cn/20200513094645240.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk3MjkxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>问题解决！</p>]]></content>
      
      
      
        <tags>
            
            <tag> 杂项 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>有趣的编程实践/PyQt5中的QListWidget的拖拽事件设置，双击可编辑设置，以及一个垃圾桶的实现</title>
      <link href="/2020/05/13/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/PyQt5%E4%B8%AD%E7%9A%84QListWidget%E7%9A%84%E6%8B%96%E6%8B%BD%E4%BA%8B%E4%BB%B6%E8%AE%BE%E7%BD%AE%EF%BC%8C%E5%8F%8C%E5%87%BB%E5%8F%AF%E7%BC%96%E8%BE%91%E8%AE%BE%E7%BD%AE%EF%BC%8C%E4%BB%A5%E5%8F%8A%E4%B8%80%E4%B8%AA%E5%9E%83%E5%9C%BE%E6%A1%B6%E7%9A%84%E5%AE%9E%E7%8E%B0/"/>
      <url>/2020/05/13/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/PyQt5%E4%B8%AD%E7%9A%84QListWidget%E7%9A%84%E6%8B%96%E6%8B%BD%E4%BA%8B%E4%BB%B6%E8%AE%BE%E7%BD%AE%EF%BC%8C%E5%8F%8C%E5%87%BB%E5%8F%AF%E7%BC%96%E8%BE%91%E8%AE%BE%E7%BD%AE%EF%BC%8C%E4%BB%A5%E5%8F%8A%E4%B8%80%E4%B8%AA%E5%9E%83%E5%9C%BE%E6%A1%B6%E7%9A%84%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="MyQListWidget"><a href="#MyQListWidget" class="headerlink" title="MyQListWidget"></a>MyQListWidget</h1><p>QListWidget中的要支持拖拽添加和删除item项，则需要继承实现几个方法。<br>这是我自己写的一个支持双击编辑、拖拽添加文件，拖拽删除的子类。拖拽删除的实现借助了另一个控件。</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># listwidget.pyw</span></span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> Optional</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> QListWidget, QWidget, QAbstractItemView, QListWidgetItem</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtGui <span class="keyword">import</span> QDragEnterEvent, QDropEvent, QDragMoveEvent, QKeyEvent</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtCore <span class="keyword">import</span> Qt, QModelIndex</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyListWidget</span><span class="params">(QListWidget)</span>:</span></span><br><span class="line">    <span class="string">"""支持拖拽的QListWidget"""</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, parent: Optional[QWidget]=None)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        super().__init__(parent)</span><br><span class="line">        <span class="comment"># 拖拽设置</span></span><br><span class="line">        self.setAcceptDrops(<span class="literal">True</span>)</span><br><span class="line">        self.setDragEnabled(<span class="literal">True</span>)</span><br><span class="line">        self.setDragDropMode(QAbstractItemView.DragDrop)            <span class="comment"># 设置拖放</span></span><br><span class="line">        self.setSelectionMode(QAbstractItemView.ExtendedSelection)  <span class="comment"># 设置选择多个</span></span><br><span class="line">        self.setDefaultDropAction(Qt.CopyAction)</span><br><span class="line">        <span class="comment"># 双击可编辑</span></span><br><span class="line">        self.edited_item = self.currentItem()</span><br><span class="line">        self.close_flag = <span class="literal">True</span></span><br><span class="line">        self.doubleClicked.connect(self.item_double_clicked)</span><br><span class="line">        self.currentItemChanged.connect(self.close_edit)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">keyPressEvent</span><span class="params">(self, e: QKeyEvent)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        <span class="string">"""回车事件，关闭edit"""</span></span><br><span class="line">        super().keyPressEvent(e)</span><br><span class="line">        <span class="keyword">if</span> e.key() == Qt.Key_Return:</span><br><span class="line">            <span class="keyword">if</span> self.close_flag:</span><br><span class="line">                self.close_edit()</span><br><span class="line">            self.close_flag = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">edit_new_item</span><span class="params">(self)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        <span class="string">"""edit一个新的item"""</span></span><br><span class="line">        self.close_flag = <span class="literal">False</span></span><br><span class="line">        self.close_edit()</span><br><span class="line">        count = self.count()</span><br><span class="line">        self.addItem(<span class="string">''</span>)</span><br><span class="line">        item = self.item(count)</span><br><span class="line">        self.edited_item = item</span><br><span class="line">        self.openPersistentEditor(item)</span><br><span class="line">        self.editItem(item)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">item_double_clicked</span><span class="params">(self, modelindex: QModelIndex)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        <span class="string">"""双击事件"""</span></span><br><span class="line">        self.close_edit()</span><br><span class="line">        item = self.item(modelindex.row())</span><br><span class="line">        self.edited_item = item</span><br><span class="line">        self.openPersistentEditor(item)</span><br><span class="line">        self.editItem(item)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">close_edit</span><span class="params">(self, *_)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        <span class="string">"""关闭edit"""</span></span><br><span class="line">        <span class="keyword">if</span> self.edited_item <span class="keyword">and</span> self.isPersistentEditorOpen(self.edited_item):</span><br><span class="line">            self.closePersistentEditor(self.edited_item)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">dragEnterEvent</span><span class="params">(self, e: QDragEnterEvent)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        <span class="string">"""（从外部或内部控件）拖拽进入后触发的事件"""</span></span><br><span class="line">        <span class="comment"># print(e.mimeData().text())</span></span><br><span class="line">        <span class="keyword">if</span> e.mimeData().hasText():</span><br><span class="line">            <span class="keyword">if</span> e.mimeData().text().startswith(<span class="string">'file:///'</span>):</span><br><span class="line">                e.accept()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            e.ignore()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">dragMoveEvent</span><span class="params">(self, e: QDragMoveEvent)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        <span class="string">"""拖拽移动过程中触发的事件"""</span></span><br><span class="line">        e.accept()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">dropEvent</span><span class="params">(self, e: QDropEvent)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        <span class="string">"""拖拽结束以后触发的事件"""</span></span><br><span class="line">        paths = e.mimeData().text().split(<span class="string">'\n'</span>)</span><br><span class="line">        <span class="keyword">for</span> path <span class="keyword">in</span> paths:</span><br><span class="line">            path = path.strip()</span><br><span class="line">            <span class="keyword">if</span> len(path) &gt; <span class="number">8</span>:</span><br><span class="line">                self.addItem(path.strip()[<span class="number">8</span>:])</span><br><span class="line">        e.accept()</span><br></pre></td></tr></table></figure><h1 id="QLabel垃圾桶"><a href="#QLabel垃圾桶" class="headerlink" title="QLabel垃圾桶"></a>QLabel垃圾桶</h1><p>在界面中设置一个支持拽入的QLabel，设置背景为垃圾桶<br>然后拽入后的事件一律accept。</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># label.pyw</span></span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> Optional</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> QWidget, QLabel, QDialog, QVBoxLayout</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtGui <span class="keyword">import</span> QDragEnterEvent, QDropEvent, QDragMoveEvent, QMouseEvent, QPixmap</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtCore <span class="keyword">import</span> Qt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyLabel</span><span class="params">(QLabel)</span>:</span></span><br><span class="line">    <span class="string">"""可接收拖拽的Label"""</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, parent: Optional[QWidget]=None)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        super().__init__(parent)</span><br><span class="line">        self.setAcceptDrops(<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">dragEnterEvent</span><span class="params">(self, e: QDragEnterEvent)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        e.setDropAction(Qt.MoveAction)</span><br><span class="line">        e.accept()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># def dragMoveEvent(self, e: QDragMoveEvent) -&gt; None:</span></span><br><span class="line">    <span class="comment">#     e.setDropAction(Qt.MoveAction)</span></span><br><span class="line">    <span class="comment">#     e.accept()</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">dropEvent</span><span class="params">(self, e: QDropEvent)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        e.setDropAction(Qt.MoveAction)</span><br><span class="line">        e.accept()</span><br></pre></td></tr></table></figure><h1 id="使用示例"><a href="#使用示例" class="headerlink" title="使用示例"></a>使用示例</h1><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> QApplication, QWidget, QVBoxLayout</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtGui <span class="keyword">import</span> QPixmap</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtCore <span class="keyword">import</span> Qt</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> listwidget <span class="keyword">import</span> MyListWidget</span><br><span class="line"><span class="keyword">from</span> label <span class="keyword">import</span> MyLabel</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    app = QApplication(sys.argv)</span><br><span class="line">    main_window = QWidget()</span><br><span class="line"></span><br><span class="line">    labelw = MyLabel()</span><br><span class="line">    labelw.setAlignment(Qt.AlignCenter)</span><br><span class="line">    labelw.setPixmap(QPixmap(<span class="string">'trash.jpg'</span>))</span><br><span class="line">    listw = MyListWidget()</span><br><span class="line">    </span><br><span class="line">    layout = QVBoxLayout()</span><br><span class="line">    layout.addWidget(labelw)</span><br><span class="line">    layout.addWidget(listw)</span><br><span class="line">    main_window.setLayout(layout)</span><br><span class="line">    </span><br><span class="line">    main_window.setWindowTitle(<span class="string">"test"</span>)</span><br><span class="line">    main_window.show()</span><br><span class="line">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure><p>垃圾桶的图片：<br><img src="https://img-blog.csdnimg.cn/2020051309005233.jpg" alt="Trash"><br>运行结果：<br>拖拽文件到QListWidget时会出现复制提示<br><img src="https://img-blog.csdnimg.cn/20200513090155103.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk3MjkxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>放下后文件路径便被添加到了item中<br><img src="https://img-blog.csdnimg.cn/20200513090230913.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk3MjkxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>选中item拖拽到垃圾桶上便可删除<br><img src="https://img-blog.csdnimg.cn/20200513090428621.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk3MjkxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>双击item可编辑<br><img src="https://img-blog.csdnimg.cn/2020051309061279.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk3MjkxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>]]></content>
      
      
      
        <tags>
            
            <tag> 有趣的编程实践 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>杂项/PyQt5开发环境搭建以及 Pycharm External Toold的设置</title>
      <link href="/2020/05/13/%E6%9D%82%E9%A1%B9/PyQt5%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E4%BB%A5%E5%8F%8A%20Pycharm%20External%20Toold%E7%9A%84%E8%AE%BE%E7%BD%AE/"/>
      <url>/2020/05/13/%E6%9D%82%E9%A1%B9/PyQt5%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E4%BB%A5%E5%8F%8A%20Pycharm%20External%20Toold%E7%9A%84%E8%AE%BE%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h1 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h1><p>由于pyqt5-tools依赖的pyqt5版本不是最新，因此在主环境中安装pyqt5-tools，在虚环境中安装 pyqt5 和 pyqt5-stubs。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 主环境</span></span><br><span class="line">pip3 install pyqt5-tools</span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># （虚环境）使用pipenv工具安装</span></span><br><span class="line">pipenv install pyqt5 pyqt5-stubs --skip-lock</span><br></pre></td></tr></table></figure><h1 id="安装pycharm"><a href="#安装pycharm" class="headerlink" title="安装pycharm"></a>安装pycharm</h1><p><a href="https://www.jetbrains.com/zh-cn/pycharm/download/#section=windows" target="_blank" rel="noopener">官方下载地址</a><br>pycharm有专业版和社区版，做pyqt5的开发社区版完全够了。如果愿意花钱或者是学生的话可以用专业版。</p><h1 id="External-Tools的设置"><a href="#External-Tools的设置" class="headerlink" title="External Tools的设置"></a>External Tools的设置</h1><p>pycharm中有一个External Tools的功能，我们可以把QtDesigner，和pyUIC添加进去。<br>打开settings-&gt;Tools-&gt;External Tools<br>在这里可以添加扩展工具</p><p>1、QtDesigner的设置大概像这样：<br>Name字段自取，Program改为designer.exe程序所在位置， Working directory设置为$FileDi$即可。<br>designer.exe是在安装了pyqt5-tools之后才有的，一般在 “用户目录”\AppData\Local\Programs\Python\Python37\Lib\site-packages\pyqt5_tools\Qt\bin\designer.exe下。<br> <img src="https://img-blog.csdnimg.cn/20200513074924871.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk3MjkxMQ==,size_16,color_FFFFFF,t_70" alt="QtDesigner的设置"><br>设置好以后就可以在pycharm左侧的文件树中右键-&gt;External Tools直接打开了。</p><p>2、PyUIC的设置大概像这样<br>Name字段自取，Program设置为python.exe所在的位置，一般是 “用户目录”\AppData\Local\Programs\Python\Python37\python.exe<br>Arguments字段设置为 -m PyQt5.uic.pyuic -o $FileNameWithoutExtension$.pyw $FileName$，然后Working directory设置为$FileDir$。<br><img src="https://img-blog.csdnimg.cn/20200513075645967.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk3MjkxMQ==,size_16,color_FFFFFF,t_70" alt="PyUIC的设置"><br>设置好后就可以直接右键QTDesigner产生的ui文件，External Tools-&gt;PyUIC在同一目录下生成pyw文件了。</p><h1 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a>Hello World</h1><p>用QtDesigner产生一个test.ui文件后，再用PyUIC转换成test.pyw文件<br>然后主程序大概是这样：</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> test <span class="keyword">import</span> Ui_MainWindow</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    app = QApplication(sys.argv)</span><br><span class="line">    main_window = QMainWindow()</span><br><span class="line">    ui = Ui_MainWindow()</span><br><span class="line">    ui.setupUi(main_window)</span><br><span class="line">    main_window.setWindowTitle(<span class="string">"test"</span>)</span><br><span class="line">    main_window.show()</span><br><span class="line">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure><p>运行即可看到界面了。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 杂项 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>android/android学习日记8 -- 自定义布局</title>
      <link href="/2020/03/22/android/android%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B08%20--%20%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B8%83%E5%B1%80/"/>
      <url>/2020/03/22/android/android%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B08%20--%20%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B8%83%E5%B1%80/</url>
      
        <content type="html"><![CDATA[<h1 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h1><p>先在drawable目录下新建了一个back.xml文件：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shape</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span> &gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 背景色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">"#000"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 边框色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">stroke</span> <span class="attr">android:width</span>=<span class="string">"0.5dip"</span> <span class="attr">android:color</span>=<span class="string">"#000"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br></pre></td></tr></table></figure><p>然后layout目录下新建了一个title.xml文件：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">"horizontal"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/title_back"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">"top|center"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">"@drawable/back"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"Back"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textAllCaps</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">"#fff"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">"20dp"</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/title_text"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"0dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">"top|center"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_weight</span>=<span class="string">"1"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">"@drawable/back"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">"center"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"Title Text"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">"#fff"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textAllCaps</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">"20dp"</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/title_edit"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">"top|center"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">"@drawable/back"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"Edit"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textAllCaps</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">"#fff"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">"20dp"</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p>然后就可以在其它地方用include引用了：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">layout</span>=<span class="string">"@layout/title"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p>另一种引用的方式：<br>写一个布局的类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.anothertest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.util.AttributeSet;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.widget.LinearLayout;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TitleLayout</span> <span class="keyword">extends</span> <span class="title">LinearLayout</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TitleLayout</span><span class="params">(Context context, AttributeSet attrs)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(context, attrs);</span><br><span class="line">        LayoutInflater.from(context).inflate(R.layout.title, <span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在xml中这样引用：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">com.example.anothertest.TitleLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="隐藏默认的标题栏"><a href="#隐藏默认的标题栏" class="headerlink" title="隐藏默认的标题栏"></a>隐藏默认的标题栏</h1><p>由于我做的是一个标题栏，因此还需隐藏AS默认的绿色标题栏：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//第一种</span></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.ActionBar;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">    setContentView(R.layout.activity_normal);</span><br><span class="line">    ActionBar acbar = getSupportActionBar();</span><br><span class="line">    <span class="keyword">if</span>(acbar != <span class="keyword">null</span>)acbar.hide();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//第二种</span></span><br><span class="line"><span class="keyword">import</span> android.view.Window;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">    supportRequestWindowFeature(Window.FEATURE_NO_TITLE);</span><br><span class="line">    setContentView(R.layout.activity_normal);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>android/android学习日记7 -- 4种UI布局</title>
      <link href="/2020/03/22/android/android%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B07%20--%204%E7%A7%8DUI%E5%B8%83%E5%B1%80/"/>
      <url>/2020/03/22/android/android%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B07%20--%204%E7%A7%8DUI%E5%B8%83%E5%B1%80/</url>
      
        <content type="html"><![CDATA[<h1 id="线性布局"><a href="#线性布局" class="headerlink" title="线性布局"></a>线性布局</h1><p>示例代码：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">"horizontal"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"0dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_weight</span>=<span class="string">"1"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:hint</span>=<span class="string">"输入一些东西用的。。。"</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/buNo"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textAllCaps</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"Button 1"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p>其中的android:orientation=”vertical” 表示垂直（从上到下）排列<br>android:orientation=”horizontal” 表示水平（从左到右）排列</p><h1 id="相对布局"><a href="#相对布局" class="headerlink" title="相对布局"></a>相对布局</h1><p>示例：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">RelativeLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/bu1"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignParentLeft</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignParentTop</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textAllCaps</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"Button 1"</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/bu2"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignParentRight</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignParentBottom</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textAllCaps</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"Button 2"</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_below</span>=<span class="string">"@id/bu1"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_toRightOf</span>=<span class="string">"@id/bu1"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textAllCaps</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"Button 3"</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p>这里的布局都是相对其它控件而言的，可以相对父元素，也可以相对其它控件。</p><h1 id="帧布局"><a href="#帧布局" class="headerlink" title="帧布局"></a>帧布局</h1><p>示例：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">FrameLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"This is TextView"</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"This is a button"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p>所有的控件都会默认摆放在左上角，后添加的会压在已有的控件上。</p><h1 id="百分比布局"><a href="#百分比布局" class="headerlink" title="百分比布局"></a>百分比布局</h1><p>先要在app目录下的build.gradle文件中添加依赖：</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">implementation <span class="string">'androidx.percentlayout:percentlayout:1.0.0'</span></span><br></pre></td></tr></table></figure><p>然后gradle sync同步一下</p><p>示例:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.percentlayout.widget.PercentFrameLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">"left|top"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_widthPercent</span>=<span class="string">"50%"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_heightPercent</span>=<span class="string">"50%"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textAllCaps</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">"center"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"Button 1"</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">"right|top"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_widthPercent</span>=<span class="string">"50%"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_heightPercent</span>=<span class="string">"50%"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textAllCaps</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">"center"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"Button 2"</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">"left|bottom"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_widthPercent</span>=<span class="string">"50%"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_heightPercent</span>=<span class="string">"50%"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textAllCaps</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">"center"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"Button 2"</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">"right|bottom"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_widthPercent</span>=<span class="string">"50%"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_heightPercent</span>=<span class="string">"50%"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textAllCaps</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">"center"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"Button 2"</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.percentlayout.widget.PercentFrameLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="打开AS时的默认布局"><a href="#打开AS时的默认布局" class="headerlink" title="打开AS时的默认布局"></a>打开AS时的默认布局</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">".test"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/title_bg"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"200dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">"@mipmap/ic_launcher"</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"80dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"80dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:src</span>=<span class="string">"@mipmap/ic_launcher_round"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">"@id/title_bg"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">"@id/title_bg"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginStart</span>=<span class="string">"20dp"</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p>这是一个新布局，也是AS默认的布局。<br>还在研究。。。。。</p>]]></content>
      
      
      
        <tags>
            
            <tag> android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>android/android学习日记6 -- 部分UI控件</title>
      <link href="/2020/03/22/android/android%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B06%20--%20%E9%83%A8%E5%88%86UI%E6%8E%A7%E4%BB%B6/"/>
      <url>/2020/03/22/android/android%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B06%20--%20%E9%83%A8%E5%88%86UI%E6%8E%A7%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="TextView"><a href="#TextView" class="headerlink" title="TextView"></a>TextView</h1><p>显示一段文字</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag"> <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag"> <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag"> <span class="attr">android:gravity</span>=<span class="string">"center_vertical|center_horizontal"</span></span></span><br><span class="line"><span class="tag"> <span class="attr">android:textSize</span>=<span class="string">"24sp"</span></span></span><br><span class="line"><span class="tag"> <span class="attr">android:textColor</span>=<span class="string">"#00ff00"</span></span></span><br><span class="line"><span class="tag"> <span class="attr">android:text</span>=<span class="string">"This is a normal activity"</span></span></span><br><span class="line"><span class="tag"> /&gt;</span></span><br></pre></td></tr></table></figure><h1 id="Button"><a href="#Button" class="headerlink" title="Button"></a>Button</h1><p>按钮</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag"><span class="attr">android:id</span>=<span class="string">"@+id/buNo"</span></span></span><br><span class="line"><span class="tag"><span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag"><span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag"><span class="attr">android:text</span>=<span class="string">"Button"</span></span></span><br><span class="line"><span class="tag"><span class="attr">android:textAllCaps</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></table></figure><h1 id="EditText"><a href="#EditText" class="headerlink" title="EditText"></a>EditText</h1><p>文本输入框</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag"><span class="attr">android:id</span>=<span class="string">"@+id/edit_text"</span></span></span><br><span class="line"><span class="tag"><span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag"><span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag"><span class="attr">android:hint</span>=<span class="string">"请输入..."</span></span></span><br><span class="line"><span class="tag"><span class="attr">android:maxLines</span>=<span class="string">"2"</span></span></span><br><span class="line"><span class="tag"> /&gt;</span></span><br></pre></td></tr></table></figure><p>在主程序中获取文本值：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">EditText edit_text = (EditText)findViewById(R.id.edit_text);</span><br><span class="line">String value = edit_text.getText().toString();</span><br></pre></td></tr></table></figure><h1 id="ImageView"><a href="#ImageView" class="headerlink" title="ImageView"></a>ImageView</h1><p>插入图片</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag"><span class="attr">android:id</span>=<span class="string">"@+id/image_view"</span></span></span><br><span class="line"><span class="tag"><span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag"><span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag"><span class="attr">android:src</span>=<span class="string">"@drawable/img_1"</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></table></figure><p>在主程序中更改图片来源：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ImageView image = (ImageView)findViewById(R.id.image_view);</span><br><span class="line">image.setImageResource(R.drawable.img_2);   <span class="comment">//更改图片来源</span></span><br></pre></td></tr></table></figure><h1 id="ProgressBar"><a href="#ProgressBar" class="headerlink" title="ProgressBar"></a>ProgressBar</h1><p>进度条<br>默认是转圈圈，可以通过style设置为条条</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ProgressBar</span></span></span><br><span class="line"><span class="tag"><span class="attr">android:id</span>=<span class="string">"@+id/pro_bar"</span></span></span><br><span class="line"><span class="tag"><span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag"><span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag"><span class="attr">style</span>=<span class="string">"?android:attr/progressBarStyleHorizontal"</span></span></span><br><span class="line"><span class="tag"><span class="attr">android:max</span>=<span class="string">"100"</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></table></figure><p>设置显示和隐藏的方法（也适用于其它控件）</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ProgressBar probar = (ProgressBar)findViewById(R.id.progress_bar);</span><br><span class="line"><span class="keyword">if</span>(probar.getVisibility() == View.GONE)</span><br><span class="line">probar.setVisibility(View.VISIBLE);</span><br><span class="line"><span class="keyword">else</span> probar.setVisibility(View.GONE);</span><br></pre></td></tr></table></figure><p>View.GNOE是移除<br>View.INVISIBLE则是不可见，没有移除<br>View.VISIBLE是可见</p><p>更改进度条的方式：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> pro = probar.getProgress();</span><br><span class="line">pro += <span class="number">10</span>;</span><br><span class="line">probar.setProgress(pro);</span><br></pre></td></tr></table></figure><p>屏蔽用户与界面交互的方法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">probar = <span class="keyword">new</span> ProgressBar(NormalActivity.<span class="keyword">this</span>);</span><br><span class="line"><span class="comment">//屏蔽</span></span><br><span class="line">getWindow().setFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE, WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE);</span><br><span class="line">probar.setVisibility(View.VISIBLE);</span><br><span class="line"><span class="comment">//恢复</span></span><br><span class="line">getWindow().clearFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE);</span><br><span class="line">probar.setVisibility(View.GONE);</span><br></pre></td></tr></table></figure><h1 id="AlertDialog"><a href="#AlertDialog" class="headerlink" title="AlertDialog"></a>AlertDialog</h1><p>在当前界面弹出一个对话框，屏蔽掉其它控件的交互能力。<br>用于提示一些很重要的内容或者警告信息。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">AlertDialog.Builder dialog = <span class="keyword">new</span> AlertDialog.Builder(NormalActivity.<span class="keyword">this</span>);</span><br><span class="line">dialog.setTitle(<span class="string">"你好hentai"</span>);    <span class="comment">//设置标题</span></span><br><span class="line">dialog.setMessage(<span class="string">"有点重要的事和你说。"</span>);    <span class="comment">//设置内容</span></span><br><span class="line">dialog.setCancelable(<span class="keyword">false</span>);    <span class="comment">//能否取消</span></span><br><span class="line"><span class="comment">//设置俩按钮的点击事件和文字</span></span><br><span class="line">dialog.setPositiveButton(<span class="string">"我知道了"</span>, <span class="keyword">new</span> DialogInterface.OnClickListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(DialogInterface dialog, <span class="keyword">int</span> which)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Toast.makeText(NormalActivity.<span class="keyword">this</span>, <span class="string">"OK"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">dialog.setNegativeButton(<span class="string">"滚你md"</span>, <span class="keyword">new</span> DialogInterface.OnClickListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(DialogInterface dialog, <span class="keyword">int</span> which)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Toast.makeText(NormalActivity.<span class="keyword">this</span>, <span class="string">"我可以给你当羊，但你要给我草！"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">dialog.show();  <span class="comment">//显示</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>android/android学习日记5 -- 监听事件</title>
      <link href="/2020/03/22/android/android%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B05%20--%20%E7%9B%91%E5%90%AC%E4%BA%8B%E4%BB%B6/"/>
      <url>/2020/03/22/android/android%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B05%20--%20%E7%9B%91%E5%90%AC%E4%BA%8B%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="注册监听器"><a href="#注册监听器" class="headerlink" title="注册监听器"></a>注册监听器</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Button button = (Button)findViewById(R.id.button);</span><br><span class="line">button.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>传入的参数是一个View.onClickListener对象。<br>所以还有另一种写法：</p><h1 id="实现View-onClickListener接口"><a href="#实现View-onClickListener接口" class="headerlink" title="实现View.onClickListener接口"></a>实现View.onClickListener接口</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title">View</span>.<span class="title">OnClickListener</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">Button startNormal = (Button)findViewById(R.id.start_normal_activity);</span><br><span class="line">        startNormal.setOnClickListener(<span class="keyword">this</span>);</span><br><span class="line">        Button startDialog = (Button)findViewById(R.id.start_dialog_activity);</span><br><span class="line">        startDialog.setOnClickListener(<span class="keyword">this</span>);</span><br><span class="line">        Button startagain = (Button)findViewById(R.id.start_again);</span><br><span class="line">        startagain.setOnClickListener(<span class="keyword">this</span>);</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Intent intent;</span><br><span class="line">        <span class="keyword">switch</span>(v.getId())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">case</span> R.id.start_normal_activity:</span><br><span class="line">                intent = <span class="keyword">new</span> Intent(MainActivity.<span class="keyword">this</span>, NormalActivity<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">                startActivity(intent);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.start_dialog_activity:</span><br><span class="line">                intent = <span class="keyword">new</span> Intent(MainActivity.<span class="keyword">this</span>, DialogActivity<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">                startActivity(intent);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.start_again:</span><br><span class="line">                intent = <span class="keyword">new</span> Intent(MainActivity.<span class="keyword">this</span>, MainActivity<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">                startActivity(intent);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>android/android学习日记4 -- 活动的生存期</title>
      <link href="/2020/03/22/android/android%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B04%20--%20%E6%B4%BB%E5%8A%A8%E7%9A%84%E7%94%9F%E5%AD%98%E6%9C%9F/"/>
      <url>/2020/03/22/android/android%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B04%20--%20%E6%B4%BB%E5%8A%A8%E7%9A%84%E7%94%9F%E5%AD%98%E6%9C%9F/</url>
      
        <content type="html"><![CDATA[<h1 id="返回栈"><a href="#返回栈" class="headerlink" title="返回栈"></a>返回栈</h1><p>Android中的活动是栈式管理（Task）的，每启动一个新活动，就会将新活动入栈，按back键又会销毁最上面的活动，而Android显示的活动就是栈顶活动。<br><img src="https://img-blog.csdnimg.cn/20191112171306622.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk3MjkxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="关于生存期的回调方法"><a href="#关于生存期的回调方法" class="headerlink" title="关于生存期的回调方法"></a>关于生存期的回调方法</h1><p>onCreate()<br>onStart()<br>onResume()<br>onPause()<br>onStop()<br>onDestroy()<br>onRestart()<br>可以在类中重写这些方法。<br><img src="https://img-blog.csdnimg.cn/20191112171910686.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk3MjkxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="活动被系统回收的处理方式"><a href="#活动被系统回收的处理方式" class="headerlink" title="活动被系统回收的处理方式"></a>活动被系统回收的处理方式</h1><p>重写活动的onSaveInstanceState方法，将数据保存到Bundle里.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onSaveInstanceState</span><span class="params">(Bundle outState)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onSaveInstanceState(outState);</span><br><span class="line">    String tmpdata = <span class="string">"要保存的东西"</span>;</span><br><span class="line">    outState.putString(<span class="string">"data_key"</span>, tmpdata);<span class="comment">//设定数据的键值</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这样，在活动再次创建时，便可从Bundle参数中获取数据了。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">    setContentView(R.layout.activity_main);</span><br><span class="line">    <span class="keyword">if</span>(savedInstanceState != <span class="keyword">null</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        String tmp = savedInstanceState.getString(<span class="string">"data_key"</span>); <span class="comment">//根据键值获取数据</span></span><br><span class="line">        Log.e(TAG, tmp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="活动的启动模式"><a href="#活动的启动模式" class="headerlink" title="活动的启动模式"></a>活动的启动模式</h1><h2 id="standard"><a href="#standard" class="headerlink" title="standard"></a>standard</h2><p>默认的启动模式，每当启动一个活动，它就会在返回栈中入栈，并处于栈顶位置。因此栈顶可能会有好几个相同的活动。<br><img src="https://img-blog.csdnimg.cn/20191112172632395.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk3MjkxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h2 id="singleTop"><a href="#singleTop" class="headerlink" title="singleTop"></a>singleTop</h2><p>在启动活动时发现栈顶已有该活动时不会创建新活动。<br>但是它只检查栈顶。<br><img src="https://img-blog.csdnimg.cn/20191112173004218.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk3MjkxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h2 id="singleTask"><a href="#singleTask" class="headerlink" title="singleTask"></a>singleTask</h2><p>这种模式会检查整个返回栈，如果发现要创建的活动已存在，则会把这个活动之上的所有活动通通出栈。<br><img src="https://img-blog.csdnimg.cn/20191112173204788.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk3MjkxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h2 id="singleInstance"><a href="#singleInstance" class="headerlink" title="singleInstance"></a>singleInstance</h2><p>这种模式会启用一个新的返回栈来管理这个活动，这样其它的应用程序就可以共同来访问这个活动。<br>但是按back键可能会有意外的结果：<br><img src="https://img-blog.csdnimg.cn/20191112173444860.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk3MjkxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h2 id="修改启动模式"><a href="#修改启动模式" class="headerlink" title="修改启动模式"></a>修改启动模式</h2><p>在AndroidManifest.xml中修改：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag"><span class="attr">android:launchMode</span>=<span class="string">"singleTop"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="自己管理活动"><a href="#自己管理活动" class="headerlink" title="自己管理活动"></a>自己管理活动</h1><p>这是在另一个文件中定义的类，用于管理活动。<br>这样，你就可以按自己的需求停止活动了。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.app.Activity;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ActivityCollector</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;Activity&gt; activities = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">addActivity</span><span class="params">(Activity activity)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        activities.add(activity);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">removeActivity</span><span class="params">(Activity activity)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        activities.remove(activity);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">finishAll</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(Activity activity: activities)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(!activity.isFinishing())</span><br><span class="line">            &#123;</span><br><span class="line">                activity.finish();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>为了配合这个类，在活动中应该这样写：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">    setContentView(R.layout.activity_main);</span><br><span class="line">    ActivityCollector.addActivity(<span class="keyword">this</span>);</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onDestroy();</span><br><span class="line">    ActivityCollector.removeActivity(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>android/android学习日记3 -- intent</title>
      <link href="/2020/03/22/android/android%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B03%20--%20intent/"/>
      <url>/2020/03/22/android/android%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B03%20--%20intent/</url>
      
        <content type="html"><![CDATA[<h1 id="显式intent"><a href="#显式intent" class="headerlink" title="显式intent"></a>显式intent</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Intent intent = <span class="keyword">new</span> Intent(FirstActivity.<span class="keyword">this</span>,SecondActivity<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"><span class="comment">//第一个参数为启动活动的Context, 第二个为想要启动的活动的 Class</span></span><br><span class="line">startActivity(intent);      <span class="comment">//启动活动</span></span><br></pre></td></tr></table></figure><p>在FIrstActivity的基础上打开SecondActivity<br>startActivity() 执行intent</p><h1 id="隐式intent"><a href="#隐式intent" class="headerlink" title="隐式intent"></a>隐式intent</h1><p>app/src/res/AndroidManifest.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">".SecondActivity"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"com.example.activitytest.ACTION_START"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">"android.intent.category.DEFAULT"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">"com.example.activitytest.MY_CATEGORY"</span> /&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br></pre></td></tr></table></figure><p>action标签指明当前活动可以响应“com.example.activitytest.ACTION_START”这个Action。<br>category标签进一步精确指明。<br>只有俩标签能同时匹配时，该活动才能响应intent</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Intent intent = <span class="keyword">new</span> Intent(<span class="string">"com.example.activitytest.ACTION_START"</span>);    <span class="comment">//隐式intent</span></span><br><span class="line">intent.addCategory(<span class="string">"com.example.activitytest.MY_CATEGORY"</span>);    <span class="comment">//添加category</span></span><br><span class="line">startActivity(intent);      <span class="comment">//启动活动</span></span><br></pre></td></tr></table></figure><p>startActivity会自动把”android.intent.category.DEFAULT”添加到 intent 中<br>action只能指定一个，而category可以指定多个</p><h1 id="调用系统的intent"><a href="#调用系统的intent" class="headerlink" title="调用系统的intent"></a>调用系统的intent</h1><p>1、打开系统浏览器</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Intent intent = <span class="keyword">new</span> Intent(Intent.ACTION_VIEW); <span class="comment">//Android的内置动作</span></span><br><span class="line">intent.setData(Uri.parse(<span class="string">"http://baidu.com"</span>));<span class="comment">//将网址解析为Uri对象，再传入intent 中</span></span><br><span class="line">startActivity(intent);</span><br></pre></td></tr></table></figure><p>2、打电话</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Intent intent = <span class="keyword">new</span> Intent(Intent.ACTION_DIAL);</span><br><span class="line">intent.setData(Uri.parse(<span class="string">"tel:10086"</span>));</span><br><span class="line">startActivity(intent);</span><br></pre></td></tr></table></figure><h1 id="响应intent"><a href="#响应intent" class="headerlink" title="响应intent"></a>响应intent</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.intent.action.VIEW"</span>/&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">"android.intent.category.DEFAULT"</span>/&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:scheme</span>=<span class="string">"http"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br></pre></td></tr></table></figure><p>data标签指定当前的活动可以响应什么类型的数据<br>android:scheme=”http”指定了数据的协议必须是http 协议</p><h1 id="向下一个活动传递数据"><a href="#向下一个活动传递数据" class="headerlink" title="向下一个活动传递数据"></a>向下一个活动传递数据</h1><p>FirstActivity:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String data = <span class="string">"第二个活动"</span>;</span><br><span class="line">Intent intent = <span class="keyword">new</span> Intent(FirstActivity.<span class="keyword">this</span>,SecondActivity<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">intent.putExtra(<span class="string">"extra_data"</span>, data);   <span class="comment">//第一个参数是键，第二个是传递的数据</span></span><br></pre></td></tr></table></figure><p>SecondActivity:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Intent intent = getIntent();            <span class="comment">//获取用于启动本活动的Intent</span></span><br><span class="line">String data = intent.getStringExtra(<span class="string">"extra_data"</span>);  <span class="comment">//根据键获取String数据</span></span><br></pre></td></tr></table></figure><h1 id="返回数据给上一个活动"><a href="#返回数据给上一个活动" class="headerlink" title="返回数据给上一个活动"></a>返回数据给上一个活动</h1><p>FirstActivity:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">startActivityForResult(intent, <span class="number">1</span>);  <span class="comment">//1 为请求码，具有唯一性</span></span><br></pre></td></tr></table></figure><p>与startActivity的区别：这种启动活动的方式期望返回一个结果<br>当SecondActivity被销毁后，会回调上一个活动的onActivityResult方法</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onActivityResult</span><span class="params">(<span class="keyword">int</span> requestCode, <span class="keyword">int</span> resultCode, @Nullable Intent data)</span></span></span><br><span class="line"><span class="function"><span class="comment">//第一个参数为请求码，第二个为返回的处理结果：Result_OK、Result_CANCEL之类的</span></span></span><br><span class="line"><span class="function"><span class="comment">//第三个参数为或许携带着数据的intent</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onActivityResult(requestCode, resultCode, data);</span><br><span class="line">    <span class="keyword">switch</span>(requestCode)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">if</span>(resultCode == RESULT_OK)</span><br><span class="line">            &#123;</span><br><span class="line">                String returnedData = data.getStringExtra(<span class="string">"data_return"</span>);</span><br><span class="line">                Toast.makeText(FirstActivity.<span class="keyword">this</span>, returnedData, Toast.LENGTH_SHORT).show();</span><br><span class="line">            &#125;</span><br><span class="line">           <span class="keyword">default</span>:</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>SecondActiviry:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onBackPressed</span><span class="params">()</span><span class="comment">//重写了按Back键的方法</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Intent intent = <span class="keyword">new</span> Intent();</span><br><span class="line">    intent.putExtra(<span class="string">"data_return"</span>, <span class="string">"你好老二"</span>);</span><br><span class="line">    setResult(RESULT_OK, intent);   <span class="comment">//向上一个活动返回处理结果和数据</span></span><br><span class="line">    finish();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>android/android学习日记2 -- 活动中的其它元素</title>
      <link href="/2020/03/22/android/android%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B02%20--%20%E6%B4%BB%E5%8A%A8%E4%B8%AD%E7%9A%84%E5%85%B6%E5%AE%83%E5%85%83%E7%B4%A0/"/>
      <url>/2020/03/22/android/android%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B02%20--%20%E6%B4%BB%E5%8A%A8%E4%B8%AD%E7%9A%84%E5%85%B6%E5%AE%83%E5%85%83%E7%B4%A0/</url>
      
        <content type="html"><![CDATA[<h1 id="Toast"><a href="#Toast" class="headerlink" title="Toast"></a>Toast</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Toast.makeText(FirstActivity.<span class="keyword">this</span>, <span class="string">"test"</span>, Toast.LENGTH_SHORT).show();</span><br></pre></td></tr></table></figure><p>第一个参数为活动本身，第二个为消息内容，第三个是显示时长（Toast.LENGTH_SHORT, Toast.LENGTH_LONG）。</p><p>该段代码会弹出一些短小的通知信息 ‘test’ 。</p><h1 id="Menu"><a href="#Menu" class="headerlink" title="Menu"></a>Menu</h1><p>1、在res目录下新建一个menu文件夹<br>2、右键menu, New - Menu resource file<br>3、输入文件名完成创建 xml<br>示例：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">menu</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span> = <span class="string">"@+id/add_item"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:title</span> = <span class="string">"Add"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span> = <span class="string">"@+id/remove_item"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:title</span> = <span class="string">"Remove"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span> = <span class="string">"@+id/exit"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:title</span> = <span class="string">"exit"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">menu</span>&gt;</span></span><br></pre></td></tr></table></figure><p>item 标签用来创建具体的一个菜单项<br>android:id 指定标识符<br>android:title 指定名称</p><p>4、回到主方法的文件<br>Ctrl + o 选择onCreateOptionsMenu(Menu menu)<br>重写该方法<br>示例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onCreateOptionsMenu</span><span class="params">(Menu menu)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    getMenuInflater().inflate(R.menu.main, menu);</span><br><span class="line">    <span class="comment">//第一个参数指定文件， 第二个指定添加到哪一个对象</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.onCreateOptionsMenu(menu);</span><br><span class="line">    <span class="comment">//return true表示允许菜单显示出来</span></span><br><span class="line">    <span class="comment">//return false 则菜单不显示</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>5、让按钮响应事件<br>重写 onOptionsItemSelected(@NonNull MenuItem item) 方法<br>示例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onOptionsItemSelected</span><span class="params">(@NonNull MenuItem item)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (item.getItemId())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">case</span> R.id.add_item:</span><br><span class="line">                Toast.makeText(FirstActivity.<span class="keyword">this</span>,<span class="string">"Add"</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.remove_item:</span><br><span class="line">                Toast.makeText(FirstActivity.<span class="keyword">this</span>,<span class="string">"Remove"</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.exit:</span><br><span class="line">                finish();<span class="comment">//销毁当前活动</span></span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.onOptionsItemSelected(item);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h1 id="销毁当前活动"><a href="#销毁当前活动" class="headerlink" title="销毁当前活动"></a>销毁当前活动</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">finish();</span><br></pre></td></tr></table></figure><h1 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h1><p>（1）@NotNull：用在基本类型上，不能为null，但可以为空字符串</p><p>（2）@NotEmpty：用在集合类上，不能为null，并且长度必须大于0</p><p>（3）@NotBlank：只能作用在String上，不能为null，而且调用trim()后，长度必须大于0</p><p>（4）@NonNull：在方法或构造函数的参数上使用，生成一个空值检查语句。用于指明所修饰的参数，字段或方法的值不可以为null。</p>]]></content>
      
      
      
        <tags>
            
            <tag> android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>android/android学习日记1 -- 项目起步</title>
      <link href="/2020/03/22/android/android%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B01%20--%20%E9%A1%B9%E7%9B%AE%E8%B5%B7%E6%AD%A5/"/>
      <url>/2020/03/22/android/android%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B01%20--%20%E9%A1%B9%E7%9B%AE%E8%B5%B7%E6%AD%A5/</url>
      
        <content type="html"><![CDATA[<h1 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h1><p>1、选择 Add No Activity<br>2、配置gradle，jcenter<br><a href="https://blog.csdn.net/weixin_44972911/article/details/102727132" target="_blank" rel="noopener">https://blog.csdn.net/weixin_44972911/article/details/102727132</a><br>3、右上角sync 按钮等待项目创建完毕</p><h1 id="创建活动"><a href="#创建活动" class="headerlink" title="创建活动"></a>创建活动</h1><p>app/src/main/java/com.example.*<br>右键 New-Activity-Empty Activity<br>勾选Generate Layout File 表示创建一个对应的xml<br>勾选Launcher Activity 表示设置为主活动</p><h1 id="创建布局"><a href="#创建布局" class="headerlink" title="创建布局"></a>创建布局</h1><p>1、<br>pp/src/main/res<br>右键 New-Derictory   新建layout  目录<br>右键layout  New-xml-layout XML File<br>2、<br>布局有两个窗口<br>Design   预览<br>Text          代码<br>3、<br>示例</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/button_1"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"test"</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p>match_parent  表示和当前父元素一样<br>wrap_content   表示自适应大小</p><h1 id="加载布局"><a href="#加载布局" class="headerlink" title="加载布局"></a>加载布局</h1><p>打开活动的java 文件<br>示例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.widget.Button;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FirstActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.first_layout);      <span class="comment">//加载布局</span></span><br><span class="line">        Button but1 = (Button)findViewById(R.id.button_1);<span class="comment">//引用xml中的元素</span></span><br><span class="line">        but1.setOnClickListener(</span><br><span class="line">                <span class="keyword">new</span> View.OnClickListener()</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span></span></span><br><span class="line"><span class="function">                    </span>&#123;</span><br><span class="line">                        Toast.makeText(FirstActivity.<span class="keyword">this</span>, <span class="string">"test"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="注册活动"><a href="#注册活动" class="headerlink" title="注册活动"></a>注册活动</h1><p>所有的活动都要在 app/src/main/AndroidMainfest.xml 中注册才能生效<br>示例：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">manifest</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">package</span>=<span class="string">"com.example.test"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">application</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:allowBackup</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:icon</span>=<span class="string">"@mipmap/ic_launcher"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:label</span>=<span class="string">"@string/app_name"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:roundIcon</span>=<span class="string">"@mipmap/ic_launcher_round"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:supportsRtl</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:theme</span>=<span class="string">"@style/AppTheme"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:name</span>=<span class="string">".FirstActivity"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:label</span>=<span class="string">"test"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.intent.action.MAIN"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">"android.intent.category.LAUNCHER"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure><p>activity 标签为注册标签<br>intent-filter 标签中的内容表示将活动注册为主活动<br>android:label 指定活动中标题栏的内容，给主活动指定的label不仅会成为标题栏中的内容，还会成为启动器中应用程序显示的名称。</p><h1 id="快捷键"><a href="#快捷键" class="headerlink" title="快捷键"></a>快捷键</h1><p>Alt + enter      可以自动解决import 问题<br>Ctrl + o        选择重写方法</p>]]></content>
      
      
      
        <tags>
            
            <tag> android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ACM/unordered_map</title>
      <link href="/2020/02/22/ACM/unordered_map/"/>
      <url>/2020/02/22/ACM/unordered_map/</url>
      
        <content type="html"><![CDATA[<h1 id="unordered-map"><a href="#unordered-map" class="headerlink" title="unordered_map"></a>unordered_map</h1><p>#include &lt; unordered_map &gt;<br>特点：其查找速度非常的快<br>unordered_map&lt; first_type,second_type &gt; M;<br>M.count( key )    计算有多少个键值<br>M.find( key )       查找键值key 的迭代器位置，找不到返回M.end()<br>建立和添加键值对与Map差不多 </p><p>可以用来模拟数组，并查集。</p>]]></content>
      
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ACM/ACM个人笔记</title>
      <link href="/2020/02/22/ACM/ACM%E4%B8%AA%E4%BA%BA%E7%AC%94%E8%AE%B0/"/>
      <url>/2020/02/22/ACM/ACM%E4%B8%AA%E4%BA%BA%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<p>@<a href="基本算法">TOC</a></p><h2 id="1、枚举"><a href="#1、枚举" class="headerlink" title="1、枚举"></a>1、枚举</h2><p>从问题的所有可能解的集合中一一枚举，判断能使命题成立的解。</p><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5660" target="_blank" rel="noopener">HDU5660</a><br><a href="http://poj.org/problem?id=1006" target="_blank" rel="noopener">POJ1006</a></p><h2 id="2、模拟"><a href="#2、模拟" class="headerlink" title="2、模拟"></a>2、模拟</h2><p>根据题意一步步走代码，通常会设坑。<br><a href="http://poj.org/problem?id=1298" target="_blank" rel="noopener">POJ1298</a><br><a href="http://poj.org/problem?id=2632" target="_blank" rel="noopener">POJ2632</a><br><a href="http://poj.org/problem?id=1922" target="_blank" rel="noopener">POJ1922</a><br><a href="http://poj.org/problem?id=1068" target="_blank" rel="noopener">POJ1068</a></p><h2 id="3、二分"><a href="#3、二分" class="headerlink" title="3、二分"></a>3、二分</h2><h3 id="二分查找"><a href="#二分查找" class="headerlink" title="二分查找"></a>二分查找</h3><p>在一个单调有序集合中查找元素，每次将集合分为左右两部分，判断解在哪个部分并调整上下界，直到找到目标。<br>k = (low+top)/2<br>array[k] == key ——-succeed<br>array[k] &gt; key ———array[low ~ k-1]<br>array[k] &lt; key ———array[k+1 ~ top]</p><h3 id="二分答案-检验"><a href="#二分答案-检验" class="headerlink" title="二分答案+检验"></a>二分答案+检验</h3><p>可以确定解在一个有序的范围内，用二分查找的方式查找正确的解。<br>每次判断都采用一个检验函数。<br><a href="http://acm.zju.edu.cn/onlinejudge/showProblem.do?problemCode=4130" target="_blank" rel="noopener">ZOJ4130</a><br><a href="http://poj.org/problem?id=2785" target="_blank" rel="noopener">POJ2785</a><br><a href="https://hihocoder.com/problemset/problem/1139" target="_blank" rel="noopener">HihoCoder1139</a><br><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5038" target="_blank" rel="noopener">HDU5038</a><br><a href="http://poj.org/problem?id=1018" target="_blank" rel="noopener">POJ1018</a></p><h2 id="4、并查集"><a href="#4、并查集" class="headerlink" title="4、并查集"></a>4、并查集</h2><p>初始化每个节点的父节点是自己<br>查询2个点是否在同一集合：比较最高父节点是否相同<br>合并：一个节点的最高父节点等于另一个节点<br>优化：使每个点的直接父节点是最高父节点</p><h2 id="5、DFS"><a href="#5、DFS" class="headerlink" title="5、DFS"></a>5、DFS</h2><p>一条路走到黑，并标记走过的点，走不了就回退。<br><a href="http://poj.org/problem?id=2386" target="_blank" rel="noopener">POJ2386</a><br><a href="http://bailian.openjudge.cn/practice/2815" target="_blank" rel="noopener">百练2815</a><br><a href="http://bailian.openjudge.cn/practice/4103" target="_blank" rel="noopener">百练4103</a><br><a href="http://bailian.openjudge.cn/practice/4123" target="_blank" rel="noopener">百练4123</a><br><a href="http://poj.org/problem?id=3083" target="_blank" rel="noopener">POJ3083</a><br><a href="http://poj.org/problem?id=1321" target="_blank" rel="noopener">POJ1321</a></p><h2 id="6、BFS"><a href="#6、BFS" class="headerlink" title="6、BFS"></a>6、BFS</h2><p>一层一层的走。<br><a href="http://poj.org/problem?id=3278" target="_blank" rel="noopener">POJ3278</a><br><a href="http://bailian.openjudge.cn/practice/4116?lang=en_US" target="_blank" rel="noopener">百练4116</a></p><h2 id="7、DP"><a href="#7、DP" class="headerlink" title="7、DP"></a>7、DP</h2><p>将一个问题分解成许多子问题。<br>将问题转化为01背包<br>完全背包改一下初始化</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;不压缩</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;m;i++)</span><br><span class="line">for(int j&#x3D;n;j&gt;&#x3D;w[i];j--)</span><br><span class="line">dp[i][j] &#x3D; max(dp[i-1][j] , dp[i-1][j-w[i]] + v[i]);</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;滚动数组</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;m;i++)</span><br><span class="line">&#123;</span><br><span class="line">int tap&#x3D;i%2;</span><br><span class="line">for(int j&#x3D;n;j&gt;&#x3D;w[i];j--)</span><br><span class="line">dp[tap][j] &#x3D; max(dp[!tap][j] , dp[!tap][j-w[i]] + v[i])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;一维数组</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;m;i++)</span><br><span class="line">for(int j&#x3D;n;j&gt;&#x3D;w[i];j--)</span><br><span class="line">dp[j] &#x3D; max(dp[j] , dp[j-w[i]] + v[i])</span><br></pre></td></tr></table></figure><p><a href="http://poj.org/problem?id=3624" target="_blank" rel="noopener">POJ3624</a><br><a href="http://poj.org/problem?id=1276" target="_blank" rel="noopener">POJ1276</a><br><a href="http://acm.hdu.edu.cn/showproblem.php?pid=2546" target="_blank" rel="noopener">HDU2546</a><br><a href="http://acm.hdu.edu.cn/showproblem.php?pid=3449" target="_blank" rel="noopener">HDU3449</a><br><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1284" target="_blank" rel="noopener">HDU1284</a><br><a href="http://acm.hdu.edu.cn/showproblem.php?pid=2191" target="_blank" rel="noopener">HDU2191</a><br><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1024" target="_blank" rel="noopener">HDU1024</a><br>树形DP<br><a href="http://poj.org/problem?id=2342" target="_blank" rel="noopener">POJ2342</a><br><a href="http://poj.org/problem?id=1463" target="_blank" rel="noopener">POJ1463</a><br>状压DP<br><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1074" target="_blank" rel="noopener">HDU1074</a></p><h2 id="8、树状数组"><a href="#8、树状数组" class="headerlink" title="8、树状数组"></a>8、树状数组</h2><p>单点的快速更新<br>用于求前缀和-&gt;区间和</p><p><img src="https://img-blog.csdnimg.cn/20190822163549351.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk3MjkxMQ==,size_16,color_FFFFFF,t_70" alt="树状数组的图形"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#define lowbit(i) (i&amp;(-i))</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">void update(int x,int e)&#x2F;&#x2F;将第x个数加e</span><br><span class="line">&#123;</span><br><span class="line">while(x &lt; n)</span><br><span class="line">&#123;</span><br><span class="line">t[x] +&#x3D; e;</span><br><span class="line">x +&#x3D; lowbit(x);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">int sum(int k)&#x2F;&#x2F;前k个数的和</span><br><span class="line">&#123;</span><br><span class="line">int ans &#x3D; 0;</span><br><span class="line">while(k&gt;0)</span><br><span class="line">&#123;</span><br><span class="line">ans+&#x3D;t[k];</span><br><span class="line">k-&#x3D;lowbit(k);</span><br><span class="line">&#125;</span><br><span class="line">return ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="http://poj.org/problem?id=3468" target="_blank" rel="noopener">POJ3468</a><br><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1166" target="_blank" rel="noopener">HDU1166</a><br><a href="http://poj.org/problem?id=2352" target="_blank" rel="noopener">POJ2352</a><br><a href="http://poj.org/problem?id=3321" target="_blank" rel="noopener">POJ3321</a><br><a href="http://poj.org/problem?id=2182" target="_blank" rel="noopener">POJ2182</a></p><h2 id="9、线段树"><a href="#9、线段树" class="headerlink" title="9、线段树"></a>9、线段树</h2><p>线段树是一棵二叉树，树中的每一个结 点表示了一个区间[a,b]。a,b通常是整数。<br>每一个叶子节点表示了一个单位区间(长度为1)。<br>对于每一个非叶结点所表示的 结点[a,b]，其左儿子表示的区间为 [a,(a+b)/2]，右儿子表示的区间为 [(a+b)/2+1,b]。<br><img src="https://img-blog.csdnimg.cn/20190822165711266.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk3MjkxMQ==,size_16,color_FFFFFF,t_70" alt="线段树"><br><img src="https://img-blog.csdnimg.cn/20190822165933349.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk3MjkxMQ==,size_16,color_FFFFFF,t_70" alt="分解"><br>主要用于求区间最大值和最小值。<br><a href="http://poj.org/problem?id=3264" target="_blank" rel="noopener">POJ3264</a></p><h2 id="10、最短路"><a href="#10、最短路" class="headerlink" title="10、最短路"></a>10、最短路</h2><p>给定一张n个点m条边的正权有向图，求1号点到其他点的最短路径<br>按照最短路的大小从小到大加入队列，用优先队列进行维护<br><a href="http://poj.org/problem?id=2387" target="_blank" rel="noopener">POJ2387</a><br><a href="http://poj.org/problem?id=1251" target="_blank" rel="noopener">POJ1251</a></p><h2 id="11、最小生成树"><a href="#11、最小生成树" class="headerlink" title="11、最小生成树"></a>11、最小生成树</h2><p>给定一张n个点的带权无向图，求权值最小的生成树<br>kruskal算法： 将边按照权值大小排序，之后能加就加，用并查集维护<br>prim算法： 按照点进行贪心</p><p><a href="http://poj.org/problem?id=2253" target="_blank" rel="noopener">POJ2253</a><br><a href="http://poj.org/problem?id=1287" target="_blank" rel="noopener">POJ1287</a></p><h2 id="12、素数"><a href="#12、素数" class="headerlink" title="12、素数"></a>12、素数</h2><p><strong>埃筛</strong><br> 质数的倍数都不是质数<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">bool prime[N];</span><br><span class="line">void init()</span><br><span class="line">&#123;</span><br><span class="line">for(int i&#x3D;2;i&lt;N;i++)prime[i]&#x3D;true;&#x2F;&#x2F;初始化所有的数都是质数</span><br><span class="line">for(int i&#x3D;2;i*i&lt;N;i++)</span><br><span class="line">&#123;</span><br><span class="line">if(prime[i])</span><br><span class="line">&#123;</span><br><span class="line">for(int j&#x3D;i*i;j&lt;N;j+&#x3D;i)</span><br><span class="line">prime[j]&#x3D;false;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><a href="http://poj.org/problem?id=2689" target="_blank" rel="noopener">POJ2689</a></p><h2 id="13、矩阵快速幂"><a href="#13、矩阵快速幂" class="headerlink" title="13、矩阵快速幂"></a>13、矩阵快速幂</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">LL pow_mod(LL a,LL b, LL m)&#x2F;&#x2F;a的b次方模m</span><br><span class="line">&#123;</span><br><span class="line">LL ret &#x3D; 1;</span><br><span class="line">while(b)</span><br><span class="line">&#123;</span><br><span class="line">if(b&amp;1)ret &#x3D; (ret * a)%m;&#x2F;&#x2F;如果b是奇数</span><br><span class="line">a &#x3D; (a * a)%m;</span><br><span class="line">b&gt;&gt;&#x3D;1;&#x2F;&#x2F;b除等于2</span><br><span class="line">&#125;</span><br><span class="line">return ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>把其中的乘法改为矩阵的乘法就行<br><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1757" target="_blank" rel="noopener">HDU1757</a><br><a href="http://acm.hdu.edu.cn/showproblem.php?pid=3483" target="_blank" rel="noopener">HDU3483</a><br><a href="http://acm.hdu.edu.cn/showproblem.php?pid=2866" target="_blank" rel="noopener">HDU2866</a><br><a href="http://poj.org/problem?id=1995" target="_blank" rel="noopener">POJ1995</a></p><h2 id="14、网络流"><a href="#14、网络流" class="headerlink" title="14、网络流"></a>14、网络流</h2><p>给定一个有向图G=(V,E)，把图中的边看作 管道，每条边上有一个权值，表示该管道 的流量上限。给定源点s和汇点t，现在假设 在s处有一个水源，t处有一个蓄水池，问从 s到t的最大水流量是多少 。</p><p>先dfs分层，然后取最小的路径，减去正向的边，添加反向边。<br>继续dfs，直到分层无法到达汇点</p><h3 id="Dinic"><a href="#Dinic" class="headerlink" title="Dinic"></a>Dinic</h3><p>分完层次后，从源点开始，用dfs从前一层向后一层反复寻找增广路。<br>DFS过程中，要是碰到了汇点，则说明找到了一条增广路径。此时要增加总流量的值，消减路径上各边的容 量，并添加反向边，即所谓的进行增广。<br>DFS找到一条增广路径后，并不立即结束，而是回溯后继续DFS寻找下一个增广路径。<br>回溯到最小边中最上层的起点。<br>如果回溯到源点而且无法继续往下走了，DFS结束。</p><p>求每条边的容量：<br>将原图备份，原图上的边的容量减去做完最大 流的残余网络上的边的剩余容量，就是边的流量。 </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">int depth[N];</span><br><span class="line">bool fenc(int s,int t)&#x2F;&#x2F;以s为源点，t为汇点分层</span><br><span class="line">&#123;</span><br><span class="line">memset(depth,-1,sizeof(depth));</span><br><span class="line">depth[s]&#x3D;0;</span><br><span class="line">queue&lt;int&gt; Q;</span><br><span class="line">Q.push(s);&#x2F;&#x2F;源点入队列</span><br><span class="line">while(!Q.empty())</span><br><span class="line">&#123;</span><br><span class="line">int v &#x3D; Q.front();</span><br><span class="line">Q.pop();</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;N;i++)</span><br><span class="line">if(depth[i]&#x3D;&#x3D;-1&amp;&amp;G[v][i]&gt;0)&#x2F;&#x2F;深度值未被改变说明未被访问</span><br><span class="line">&#123;</span><br><span class="line">depth[i] &#x3D; depth[v] + 1;</span><br><span class="line">if(i &#x3D;&#x3D; t)return true;&#x2F;&#x2F;分层到汇点就行</span><br><span class="line">else Q.push(i);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">return false;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">bool visit[N];</span><br><span class="line">int Dicnic(int s,int t)</span><br><span class="line">&#123;</span><br><span class="line">deque&lt;int&gt; Q;</span><br><span class="line">int sumedn &#x3D; 0;</span><br><span class="line">while(fenc(s,t))&#x2F;&#x2F;只要能分层</span><br><span class="line">&#123;</span><br><span class="line">Q.push_back(s);</span><br><span class="line">meset(visit,0,sizeof(visit));</span><br><span class="line">visit[s] &#x3D; true;</span><br><span class="line">while(!Q.empty())</span><br><span class="line">&#123;</span><br><span class="line">int nd &#x3D; Q.back();</span><br><span class="line">if(nd &#x3D;&#x3D; t)&#x2F;&#x2F;如果nd 是汇点</span><br><span class="line">&#123;</span><br><span class="line">int minline &#x3D; 0xfffffff;&#x2F;&#x2F;最小边</span><br><span class="line">int minpoint;&#x2F;&#x2F;最小边的起点</span><br><span class="line">for(int i&#x3D;1;i&lt;Q.size();i++)</span><br><span class="line">&#123;</span><br><span class="line">int vs &#x3D; Q[i-1];</span><br><span class="line">int vt &#x3D; Q[i];</span><br><span class="line">if(minline&gt;G[vs][vt])</span><br><span class="line">&#123;</span><br><span class="line">minline &#x3D; G[vs][vt];</span><br><span class="line">minpoint &#x3D; vs;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;*增广，改图*&#x2F;</span><br><span class="line">sumedn +&#x3D; minline;</span><br><span class="line">for(int i&#x3D;1;i&lt;Q.size();i++)</span><br><span class="line">&#123;</span><br><span class="line">int vs &#x3D; Q[i-1],vt &#x3D; Q[i];</span><br><span class="line">G[vs][vt] -&#x3D; minline;&#x2F;&#x2F;减去正向边</span><br><span class="line">G[vt][vs] +&#x3D; minline;&#x2F;&#x2F;添加反向边</span><br><span class="line">&#125;</span><br><span class="line">while(Q.back()!&#x3D;minpoint)&#x2F;&#x2F;退栈到minpoint</span><br><span class="line">&#123;</span><br><span class="line">visit[Q.back()] &#x3D;&#x3D; false;</span><br><span class="line">Q.pop_back();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">else&#x2F;&#x2F;nd不是汇点</span><br><span class="line">&#123;</span><br><span class="line">int i;</span><br><span class="line">for(i &#x3D; 1;i&lt;&#x3D;N;i++)</span><br><span class="line">&#123;</span><br><span class="line">if(!visit[i]&amp;&amp;G[nd][i]&gt;0&amp;&amp;depth[nd]+1&#x3D;&#x3D;depth[i])</span><br><span class="line">&#x2F;&#x2F;往下一层走</span><br><span class="line">&#123;</span><br><span class="line">visit[i] &#x3D; true;</span><br><span class="line">Q.push_back(i);</span><br><span class="line">break;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">if(i&gt;N)Q.pop_back();&#x2F;&#x2F;找不到下一个点</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">return sum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="http://poj.org/problem?id=1273" target="_blank" rel="noopener">POJ1273</a><br><a href="http://poj.org/problem?id=3436" target="_blank" rel="noopener">POJ3436</a><br><a href="http://poj.org/problem?id=2112" target="_blank" rel="noopener">POJ2112</a></p><h3 id="有流量上下界的网络最大流"><a href="#有流量上下界的网络最大流" class="headerlink" title="有流量上下界的网络最大流"></a>有流量上下界的网络最大流</h3><p><img src="https://img-blog.csdnimg.cn/20190822210915734.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk3MjkxMQ==,size_16,color_FFFFFF,t_70" alt="例图"><br><img src="https://img-blog.csdnimg.cn/20190822211517929.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk3MjkxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>在新图中做一遍最大流，得到sum1。<br>然后去掉s-&gt;t ,t-&gt;s 的边。<br>去掉和x，y相连的边。<br>以s为源，t为汇再做一次最大流，得到sum2。<br>sum = sum1 + sum2<br>设新图为G2，两次最大流后的残余网络是G，流量下界为L<br>各边的流量为：G2[i][j]-G[i][j]+L[i][j]</p><p><a href="http://poj.org/problem?id=2396" target="_blank" rel="noopener">POJ2396</a></p><h2 id="15、博弈"><a href="#15、博弈" class="headerlink" title="15、博弈"></a>15、博弈</h2><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1847" target="_blank" rel="noopener">HDU1847</a><br><a href="http://poj.org/problem?id=1067" target="_blank" rel="noopener">POJ1067</a></p><h3 id="Nim"><a href="#Nim" class="headerlink" title="Nim"></a>Nim</h3><p>有2个玩家；<br>n堆石头：t1,t1,t3……tn;<br>每次选择一堆，取走任意个石头<br>谁先取完谁获胜<br>1、若t1 ^ t2 ^ t3 ^ …… ^ tn == 0 先手败<br>2、否则，先手胜。</p><p><a href="http://poj.org/problem?id=1704" target="_blank" rel="noopener">POJ1704</a></p><h3 id="SG函数"><a href="#SG函数" class="headerlink" title="SG函数"></a>SG函数</h3><p>把原问题变成nim问题</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">int f[110];&#x2F;&#x2F;限制取</span><br><span class="line">int sg[10010];&#x2F;&#x2F;sg函数数组</span><br><span class="line">bool visit[10010];</span><br><span class="line">void sg_do(int n,int k)</span><br><span class="line">&#123;</span><br><span class="line">memset(sg,0,sizeof(sg));</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">memset(visit,0,sizeof(visit));</span><br><span class="line">for(int j&#x3D;1;j&lt;&#x3D;k;j++)</span><br><span class="line">&#123;</span><br><span class="line">if(i-f[j]&gt;&#x3D;0&amp;&amp;j&lt;&#x3D;k)&#x2F;&#x2F;对于每个 i 能到达的点 </span><br><span class="line">&#123;</span><br><span class="line">visit[sg[i-f[j]]]&#x3D;true;</span><br><span class="line">&#125;</span><br><span class="line">for(int j&#x3D;0;j&lt;&#x3D;n;j++)&#x2F;&#x2F;sg函数运算（找最小非负整数）</span><br><span class="line">if(!visit[j])</span><br><span class="line">&#123;</span><br><span class="line">sg[i]&#x3D;j;</span><br><span class="line">break;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1536" target="_blank" rel="noopener">HDU1536</a><br><a href="http://acm.hdu.edu.cn/showproblem.php?pid=3980" target="_blank" rel="noopener">HDU3980</a><br><a href="http://poj.org/problem?id=2425" target="_blank" rel="noopener">POJ2425</a></p><h2 id="16、欧几里得，中国剩余定理"><a href="#16、欧几里得，中国剩余定理" class="headerlink" title="16、欧几里得，中国剩余定理"></a>16、欧几里得，中国剩余定理</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">int gcd(int a,int b)&#x2F;&#x2F;最大公约数</span><br><span class="line">&#123;</span><br><span class="line">if(b&#x3D;&#x3D;0)return a;</span><br><span class="line">else return gcd(b,a%b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int lcm(int a,int b)&#x2F;&#x2F;最小公倍数</span><br><span class="line">&#123;</span><br><span class="line">return a&#x2F;gcd(a,b)*b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="扩展欧几里得"><a href="#扩展欧几里得" class="headerlink" title="扩展欧几里得"></a>扩展欧几里得</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;ax+by &#x3D; gcd(a,b)</span><br><span class="line">int ex_gcd(int a,int b,int &amp;x,int &amp;y)&#x2F;&#x2F;求x,y</span><br><span class="line">&#123;</span><br><span class="line">if(b&#x3D;&#x3D;0)</span><br><span class="line">&#123;</span><br><span class="line">x&#x3D;1,y&#x3D;0;</span><br><span class="line">return a;</span><br><span class="line">&#125;</span><br><span class="line">int d &#x3D; ex_gcd(b,a%b,x,y);</span><br><span class="line">int tap &#x3D; x;</span><br><span class="line">x &#x3D; y;</span><br><span class="line">y &#x3D; temp - a&#x2F;b*y;</span><br><span class="line">return gcd;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>a x + by = c  ———x0,y0 为一个解，则通解为：<br>x = x0 + b * t / gcd          ——————-   t为任意整数<br>y = y0 - b * t / gcd</p><p><a href="http://poj.org/problem?id=2142" target="_blank" rel="noopener">POJ2142</a><br><a href="http://poj.org/problem?id=2115" target="_blank" rel="noopener">POJ2115</a></p><h3 id="线性同余方程，中国剩余定理"><a href="#线性同余方程，中国剩余定理" class="headerlink" title="线性同余方程，中国剩余定理"></a>线性同余方程，中国剩余定理</h3><p>x mod 3 = 2<br>x mod 5 = 4<br>x mod 7 = 6</p><p>前两项方程可以合并为一个新的方程，然后逐项向下合并。<br>合并时运用扩展欧几里得，还可以判断是否有解。</p><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1573" target="_blank" rel="noopener">HDU1573</a><br><a href="http://hihocoder.com/problemset/problem/1303" target="_blank" rel="noopener">HihoCoder1303</a><br><a href="http://acm.hdu.edu.cn/showproblem.php?pid=3430" target="_blank" rel="noopener">HDU3430</a></p><h2 id="17、其他数学定理"><a href="#17、其他数学定理" class="headerlink" title="17、其他数学定理"></a>17、其他数学定理</h2><h3 id="费马小定理"><a href="#费马小定理" class="headerlink" title="费马小定理"></a>费马小定理</h3><p>P是质数：<br>    <em>P不能整除a：a^(P-1)  %P == 1</em><br>    <em>P能整除a：a^(P-1)  %P == 0</em></p><h3 id="欧拉定理"><a href="#欧拉定理" class="headerlink" title="欧拉定理"></a>欧拉定理</h3><p>定义欧拉函数 φ(n) ：求小于n的整数中与n互质的数的个数<br>φ(1) = 1<br>φ(n) = n - 1  （n为质数）</p><p>a,n 为正整数，若gcd(a,n)==1：<br>a^φ(n)  %n == 1</p><p>指数爆炸的时候就要降幂<br>就是求<br>a^b mod c<br>可以转化为<br>a^( b mod phi(c )   +phi(c ) ) mod c</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;欧拉函数</span><br><span class="line"> ll phi(ll n)</span><br><span class="line">&#123;</span><br><span class="line">     ll i,rea&#x3D;n;</span><br><span class="line">     for(i&#x3D;2;i*i&lt;&#x3D;n;i++)</span><br><span class="line">     &#123;</span><br><span class="line">         if(n%i&#x3D;&#x3D;0)</span><br><span class="line">         &#123;</span><br><span class="line">             rea&#x3D;rea-rea&#x2F;i;</span><br><span class="line">             while(n%i&#x3D;&#x3D;0)</span><br><span class="line">                 n&#x2F;&#x3D;i;</span><br><span class="line">          &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     if(n&gt;1)</span><br><span class="line">         rea&#x3D;rea-rea&#x2F;n;</span><br><span class="line">     return rea;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>杂项/装Debian 遇到的坑</title>
      <link href="/2020/01/22/%E6%9D%82%E9%A1%B9/%E8%A3%85Debian%20%E9%81%87%E5%88%B0%E7%9A%84%E5%9D%91/"/>
      <url>/2020/01/22/%E6%9D%82%E9%A1%B9/%E8%A3%85Debian%20%E9%81%87%E5%88%B0%E7%9A%84%E5%9D%91/</url>
      
        <content type="html"><![CDATA[<p>1、Debian 安装的时候要网，不然会卡在装软件的步骤，镜像用iso-1<br>2、Debian 有两个账户，普通账户有些命令是无法使用的，root专用命令在/usr/sbin/ 里面，而普通账户是不包括这个文件夹路径的。<br>解决方案：sudo ln -s /usr/sbin/* /usr/bin/<br>3、ctrl + alt +t 是不能打开终端的，要设置自定义快捷方式 gnome-terminal</p>]]></content>
      
      
      
        <tags>
            
            <tag> 杂项 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>杂项/设置MySQL远程访问</title>
      <link href="/2020/01/22/%E6%9D%82%E9%A1%B9/%E8%AE%BE%E7%BD%AEMySQL%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE/"/>
      <url>/2020/01/22/%E6%9D%82%E9%A1%B9/%E8%AE%BE%E7%BD%AEMySQL%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE/</url>
      
        <content type="html"><![CDATA[<h1 id="1、修改配置文件"><a href="#1、修改配置文件" class="headerlink" title="1、修改配置文件"></a>1、修改配置文件</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim &#x2F;etc&#x2F;mysql&#x2F;mysql.conf.d&#x2F;mysqld.cnf</span><br></pre></td></tr></table></figure><p>将bind-address = 127.0.0.1注释掉（即在行首加#）<br>除了注视掉这句话之外，还可以把后面的IP地址修改成允许连接的IP地址。</p><h1 id="2、删除匿名用户"><a href="#2、删除匿名用户" class="headerlink" title="2、删除匿名用户"></a>2、删除匿名用户</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">use mysql;</span><br><span class="line">delete from user where user&#x3D;&#39;&#39;&quot;;</span><br></pre></td></tr></table></figure><h1 id="3、增加外部用户"><a href="#3、增加外部用户" class="headerlink" title="3、增加外部用户"></a>3、增加外部用户</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grant all privileges on db_name.* to &#39;user&#39;@&#39;%&#39; identified by &#39;password&#39; with grant option;</span><br><span class="line">sudo service mysql restart</span><br></pre></td></tr></table></figure><h2 id="附：MySQL配置文件位置"><a href="#附：MySQL配置文件位置" class="headerlink" title="附：MySQL配置文件位置"></a>附：MySQL配置文件位置</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;etc&#x2F;mysql&#x2F;conf.d&#x2F;mysql.cnf</span><br><span class="line">&#x2F;etc&#x2F;mysql&#x2F;mysql.conf.d&#x2F;mysqld.cnf</span><br></pre></td></tr></table></figure><h2 id="附：Navicat-Premium-12工具的安装"><a href="#附：Navicat-Premium-12工具的安装" class="headerlink" title="附：Navicat Premium 12工具的安装"></a>附：Navicat Premium 12工具的安装</h2><p><a href="https://www.cnblogs.com/jpfss/articles/9193967.html" target="_blank" rel="noopener">https://www.cnblogs.com/jpfss/articles/9193967.html</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> 杂项 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>杂项/cmd 远程ssh 连接虚拟机</title>
      <link href="/2020/01/22/%E6%9D%82%E9%A1%B9/cmd%20%E8%BF%9C%E7%A8%8Bssh%20%E8%BF%9E%E6%8E%A5%E8%99%9A%E6%8B%9F%E6%9C%BA/"/>
      <url>/2020/01/22/%E6%9D%82%E9%A1%B9/cmd%20%E8%BF%9C%E7%A8%8Bssh%20%E8%BF%9E%E6%8E%A5%E8%99%9A%E6%8B%9F%E6%9C%BA/</url>
      
        <content type="html"><![CDATA[<h1 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h1><p>只需一行命令</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -p “端口” sun@“IP地址”</span><br></pre></td></tr></table></figure><p>端口为虚拟机对应设置的ssh 端口（默认22），如果是virtual box ，则要设置端口映射（通常将22映射到2222）。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 杂项 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>杂项/java打包可执行jar文件</title>
      <link href="/2020/01/22/%E6%9D%82%E9%A1%B9/java%E6%89%93%E5%8C%85%E5%8F%AF%E6%89%A7%E8%A1%8Cjar%E6%96%87%E4%BB%B6/"/>
      <url>/2020/01/22/%E6%9D%82%E9%A1%B9/java%E6%89%93%E5%8C%85%E5%8F%AF%E6%89%A7%E8%A1%8Cjar%E6%96%87%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h1><h2 id="文件夹结构（仅为示例）："><a href="#文件夹结构（仅为示例）：" class="headerlink" title="文件夹结构（仅为示例）："></a>文件夹结构（仅为示例）：</h2><p><img src="https://img-blog.csdnimg.cn/20191108205247400.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk3MjkxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h2 id="在caculat目录外编写一个-mf-文件："><a href="#在caculat目录外编写一个-mf-文件：" class="headerlink" title="在caculat目录外编写一个 mf 文件："></a>在caculat目录外编写一个 mf 文件：</h2><p>test.mf  :</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Manifest-Version: 1.0</span><br><span class="line">Main-Class: caculat.run</span><br><span class="line">Created-By: 1.8</span><br></pre></td></tr></table></figure><p>其中的Main-Class: 指定了jar 包中的主类</p><h2 id="然后在caculat-目录外运行命令："><a href="#然后在caculat-目录外运行命令：" class="headerlink" title="然后在caculat 目录外运行命令："></a>然后在caculat 目录外运行命令：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jar -cvfm caculat.jar test.mf caculat\*.class caculat\stack\*.class</span><br></pre></td></tr></table></figure><p>caculat.jar 是生成的包名，test.mf 即编写的打包信息，后面是打包要包括的.class文件。<br>注：如果是Linux系统，要把 \ 替换为 / 。</p><h2 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h2><p>cmd命令</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar caculat.jar</span><br></pre></td></tr></table></figure><p>便可运行刚才打包的jar 文件</p><p>windows下双击jar文件应该也能直接运行。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 杂项 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>杂项/python3 CGI 编程遇到的坑</title>
      <link href="/2020/01/22/%E6%9D%82%E9%A1%B9/python3%20CGI%20%E7%BC%96%E7%A8%8B%E9%81%87%E5%88%B0%E7%9A%84%E5%9D%91/"/>
      <url>/2020/01/22/%E6%9D%82%E9%A1%B9/python3%20CGI%20%E7%BC%96%E7%A8%8B%E9%81%87%E5%88%B0%E7%9A%84%E5%9D%91/</url>
      
        <content type="html"><![CDATA[<h2 id="python3-CGI-编程遇到的坑"><a href="#python3-CGI-编程遇到的坑" class="headerlink" title="python3 CGI 编程遇到的坑"></a>python3 CGI 编程遇到的坑</h2><p>当把.cgi文件放到/usr/lib/cgi-bin/目录下后，应该回到上一层目录，然后调用命令：python -m http.server –cgi 8081<br>来启动python3的服务，不然网页是打不开的。<br>然后访问的网页应该是：localhost:8081/cgi-bin/*.cgi<br>（8081可以自己改）</p>]]></content>
      
      
      
        <tags>
            
            <tag> 杂项 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>杂项/mySQL 的中文问题</title>
      <link href="/2020/01/22/%E6%9D%82%E9%A1%B9/mySQL%20%E7%9A%84%E4%B8%AD%E6%96%87%E9%97%AE%E9%A2%98/"/>
      <url>/2020/01/22/%E6%9D%82%E9%A1%B9/mySQL%20%E7%9A%84%E4%B8%AD%E6%96%87%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>MySQL的默认编码是 latin1<br>而这个编码是不识别中文的。</p><p>解决方案：<br>1、</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano &#x2F;etc&#x2F;mysql&#x2F;conf.d&#x2F;mysql.cnf</span><br></pre></td></tr></table></figure><p>修改如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">character_set_server &#x3D; utf8</span><br></pre></td></tr></table></figure><p>2、（可以不设置）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano  &#x2F;etc&#x2F;mysql&#x2F;mysql.conf.d&#x2F;mysqld.cnf</span><br></pre></td></tr></table></figure><p>在 [mysqld] 里添加如下位置：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">character-set-server &#x3D; utf8</span><br></pre></td></tr></table></figure><p>3、<br>建立数据库时默认数据库编码是latin1<br>更改方式：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter database &lt;库名&gt; character set utf8;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> 杂项 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>杂项/python3 的虚环境 virtualenv</title>
      <link href="/2020/01/22/%E6%9D%82%E9%A1%B9/python3%20%E7%9A%84%E8%99%9A%E7%8E%AF%E5%A2%83%20virtualenv/"/>
      <url>/2020/01/22/%E6%9D%82%E9%A1%B9/python3%20%E7%9A%84%E8%99%9A%E7%8E%AF%E5%A2%83%20virtualenv/</url>
      
        <content type="html"><![CDATA[<h2 id="虚环境的安装"><a href="#虚环境的安装" class="headerlink" title="虚环境的安装"></a>虚环境的安装</h2><p>很简单的一条命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install virtualenv</span><br></pre></td></tr></table></figure><h2 id="虚环境的搭建"><a href="#虚环境的搭建" class="headerlink" title="虚环境的搭建"></a>虚环境的搭建</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">virtualenv venv -p python3</span><br></pre></td></tr></table></figure><p>该命令会在当前目录下建立一个venv文件夹<br>venv是默认名称，也可以指定其他名称，单最好用默认的<br>./venv/bin  下包含了当前虚环境的可执行文件</p><h2 id="进入虚环境"><a href="#进入虚环境" class="headerlink" title="进入虚环境"></a>进入虚环境</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source .&#x2F;venv&#x2F;bin&#x2F;activate</span><br></pre></td></tr></table></figure><p>在虚环境中安装的组件会在./venv/lib 目录中，而不会影响系统的python3 环境</p><h2 id="退出虚环境"><a href="#退出虚环境" class="headerlink" title="退出虚环境"></a>退出虚环境</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deactivate</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> 杂项 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>杂项/redhat 下MySQL的配置</title>
      <link href="/2020/01/22/%E6%9D%82%E9%A1%B9/redhat%20%E4%B8%8BMySQL%E7%9A%84%E9%85%8D%E7%BD%AE/"/>
      <url>/2020/01/22/%E6%9D%82%E9%A1%B9/redhat%20%E4%B8%8BMySQL%E7%9A%84%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>下载地址：<br><a href="https://dev.mysql.com/downloads/mysql/" target="_blank" rel="noopener">https://dev.mysql.com/downloads/mysql/</a><br>选择 RPM Bundle 版本，里面包含了所有的依赖包。<br>不过网速可能。。。<br>建议去百度网盘找。</p><p>下载后解压缩，得到一堆的rpm包，安装顺序：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh mysql-community-common*.rpm</span><br><span class="line">rpm -ivh mysql-community-libs*.rpm</span><br><span class="line">rpm -ivh mysql-community-client*.rpm</span><br><span class="line">rpm -ivh mysql-community-server*.rpm</span><br></pre></td></tr></table></figure><p>其中可能包含 comcat 包，好像是用于解决依赖关系的。</p><p>如果无法连接mysql服务，可以试试：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod 777 -R &#x2F;var&#x2F;lib&#x2F;mysql&#x2F; </span><br><span class="line">service mysqld restart</span><br></pre></td></tr></table></figure><h1 id="改密码"><a href="#改密码" class="headerlink" title="改密码"></a>改密码</h1><p>MySQL安装时自动生成了root密码，获取方式：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep &#39;temporary password&#39; &#x2F;var&#x2F;log&#x2F;mysqld.log</span><br></pre></td></tr></table></figure><p>输出的最后一串奇奇怪怪的字符就是密码了。</p><p>登录后改密码为123456：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">set global validate_password_policy&#x3D;0;</span><br><span class="line">set global validate_password_length&#x3D;1;</span><br><span class="line">alter user &#39;root&#39;@&#39;localhost&#39; identified by &#39;123456&#39;;</span><br></pre></td></tr></table></figure><h1 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h1><p>位置在 /etc/my.cnf</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[client]</span><br><span class="line">default_character_set&#x3D;utf8</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line">port&#x3D;3306</span><br><span class="line">collation_server &#x3D; utf8_general_ci</span><br><span class="line">character_set_server &#x3D; utf8</span><br></pre></td></tr></table></figure><h1 id="设置远程连接"><a href="#设置远程连接" class="headerlink" title="设置远程连接"></a>设置远程连接</h1><p>redhat 的系统是有防火墙的，3306端口默认不开放。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --add-port&#x3D;3306&#x2F;tcp</span><br><span class="line">service firewalld restart</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> 杂项 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>杂项/rhel yum 配置清华源</title>
      <link href="/2020/01/22/%E6%9D%82%E9%A1%B9/rhel%20yum%20%E9%85%8D%E7%BD%AE%E6%B8%85%E5%8D%8E%E6%BA%90/"/>
      <url>/2020/01/22/%E6%9D%82%E9%A1%B9/rhel%20yum%20%E9%85%8D%E7%BD%AE%E6%B8%85%E5%8D%8E%E6%BA%90/</url>
      
        <content type="html"><![CDATA[<p>在RHEL中，yum的配置文件为/etc/yum.repos.d/redhat.repo<br>里面是空的，没有任何仓库。</p><p>在这个目录下新建一个tsinghua.repo文件，写入：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line">[rhel-8-baseos-beta-source-rpms]</span><br><span class="line">name &#x3D; Red Hat Enterprise Linux 8 - BaseOS Beta (Source RPMs)</span><br><span class="line">baseurl &#x3D; https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;redhat&#x2F;rhel&#x2F;rhel-8-beta&#x2F;baseos&#x2F;source&#x2F;</span><br><span class="line">enabled &#x3D; 1</span><br><span class="line">gpgcheck &#x3D; 1</span><br><span class="line">gpgkey &#x3D; file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-beta,file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-release</span><br><span class="line"></span><br><span class="line">[rhel-8-for-aarch64-baseos-beta-rpms]</span><br><span class="line">name &#x3D; Red Hat Enterprise Linux 8 for ARM 64 - BaseOS Beta (RPMs)</span><br><span class="line">baseurl &#x3D; https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;redhat&#x2F;rhel&#x2F;rhel-8-beta&#x2F;baseos&#x2F;aarch64&#x2F;</span><br><span class="line">enabled &#x3D; 1</span><br><span class="line">gpgcheck &#x3D; 1</span><br><span class="line">gpgkey &#x3D; file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-beta,file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-release</span><br><span class="line"></span><br><span class="line">[rhel-8-for-ppc64le-baseos-beta-rpms]</span><br><span class="line">name &#x3D; Red Hat Enterprise Linux 8 for Power, little endian - BaseOS Beta (RPMs)</span><br><span class="line">baseurl &#x3D; https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;redhat&#x2F;rhel&#x2F;rhel-8-beta&#x2F;baseos&#x2F;ppc64le&#x2F;</span><br><span class="line">enabled &#x3D; 1</span><br><span class="line">gpgcheck &#x3D; 1</span><br><span class="line">gpgkey &#x3D; file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-beta,file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-release</span><br><span class="line"></span><br><span class="line">[rhel-8-for-s390x-baseos-beta-rpms]</span><br><span class="line">name &#x3D; Red Hat Enterprise Linux 8 for IBM z Systems - BaseOS Beta (RPMs)</span><br><span class="line">baseurl &#x3D; https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;redhat&#x2F;rhel&#x2F;rhel-8-beta&#x2F;baseos&#x2F;s390x&#x2F;</span><br><span class="line">enabled &#x3D; 1</span><br><span class="line">gpgcheck &#x3D; 1</span><br><span class="line">gpgkey &#x3D; file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-beta,file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-release</span><br><span class="line"></span><br><span class="line">[rhel-8-for-x86_64-baseos-beta-rpms]</span><br><span class="line">name &#x3D; Red Hat Enterprise Linux 8 for x86_64 - BaseOS Beta (RPMs)</span><br><span class="line">baseurl &#x3D; https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;redhat&#x2F;rhel&#x2F;rhel-8-beta&#x2F;baseos&#x2F;x86_64&#x2F;</span><br><span class="line">enabled &#x3D; 1</span><br><span class="line">gpgcheck &#x3D; 1</span><br><span class="line">gpgkey &#x3D; file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-beta,file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-release</span><br><span class="line"></span><br><span class="line">[rhel-8-appstream-beta-source-rpms]</span><br><span class="line">name &#x3D; Red Hat Enterprise Linux 8 - AppStream Beta (Source RPMs)</span><br><span class="line">baseurl &#x3D; https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;redhat&#x2F;rhel&#x2F;rhel-8-beta&#x2F;appstream&#x2F;source&#x2F;</span><br><span class="line">enabled &#x3D; 1</span><br><span class="line">gpgcheck &#x3D; 1</span><br><span class="line">gpgkey &#x3D; file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-beta,file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-release</span><br><span class="line"></span><br><span class="line">[rhel-8-for-aarch64-appstream-beta-rpms]</span><br><span class="line">name &#x3D; Red Hat Enterprise Linux 8 for ARM 64 - AppStream Beta (RPMs)</span><br><span class="line">baseurl &#x3D; https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;redhat&#x2F;rhel&#x2F;rhel-8-beta&#x2F;appstream&#x2F;aarch64&#x2F;</span><br><span class="line">enabled &#x3D; 1</span><br><span class="line">gpgcheck &#x3D; 1</span><br><span class="line">gpgkey &#x3D; file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-beta,file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-release</span><br><span class="line"></span><br><span class="line">[rhel-8-for-ppc64le-appstream-beta-rpms]</span><br><span class="line">name &#x3D; Red Hat Enterprise Linux 8 for Power, little endian - AppStream Beta (RPMs)</span><br><span class="line">baseurl &#x3D; https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;redhat&#x2F;rhel&#x2F;rhel-8-beta&#x2F;appstream&#x2F;ppc64le&#x2F;</span><br><span class="line">enabled &#x3D; 1</span><br><span class="line">gpgcheck &#x3D; 1</span><br><span class="line">gpgkey &#x3D; file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-beta,file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-release</span><br><span class="line"></span><br><span class="line">[rhel-8-for-s390x-appstream-beta-rpms]</span><br><span class="line">name &#x3D; Red Hat Enterprise Linux 8 for IBM z Systems - AppStream Beta (RPMs)</span><br><span class="line">baseurl &#x3D; https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;redhat&#x2F;rhel&#x2F;rhel-8-beta&#x2F;appstream&#x2F;s390x&#x2F;</span><br><span class="line">enabled &#x3D; 1</span><br><span class="line">gpgcheck &#x3D; 1</span><br><span class="line">gpgkey &#x3D; file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-beta,file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-release</span><br><span class="line"></span><br><span class="line">[rhel-8-for-x86_64-appstream-beta-rpms]</span><br><span class="line">name &#x3D; Red Hat Enterprise Linux 8 for x86_64 - AppStream Beta (RPMs)</span><br><span class="line">baseurl &#x3D; https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;redhat&#x2F;rhel&#x2F;rhel-8-beta&#x2F;appstream&#x2F;x86_64&#x2F;</span><br><span class="line">enabled &#x3D; 1</span><br><span class="line">gpgcheck &#x3D; 1</span><br><span class="line">gpgkey &#x3D; file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-beta,file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-release</span><br><span class="line"></span><br><span class="line">[rhel-8-ha-beta-source-rpms]</span><br><span class="line">name &#x3D; Red Hat Enterprise Linux 8 - HighAvailability Beta (Source RPMs)</span><br><span class="line">baseurl &#x3D; https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;redhat&#x2F;rhel&#x2F;rhel-8-beta&#x2F;add-ons&#x2F;ha&#x2F;source&#x2F;</span><br><span class="line">enabled &#x3D; 1</span><br><span class="line">gpgcheck &#x3D; 1</span><br><span class="line">gpgkey &#x3D; file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-beta,file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-release</span><br><span class="line"></span><br><span class="line">[rhel-8-for-ppc64le-ha-beta-rpms]</span><br><span class="line">name &#x3D; Red Hat Enterprise Linux 8 for Power, little endian - HighAvailability Beta (RPMs)</span><br><span class="line">baseurl &#x3D; https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;redhat&#x2F;rhel&#x2F;rhel-8-beta&#x2F;add-ons&#x2F;ha&#x2F;ppc64le&#x2F;</span><br><span class="line">enabled &#x3D; 1</span><br><span class="line">gpgcheck &#x3D; 1</span><br><span class="line">gpgkey &#x3D; file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-beta,file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-release</span><br><span class="line"></span><br><span class="line">[rhel-8-for-s390x-ha-beta-rpms]</span><br><span class="line">name &#x3D; Red Hat Enterprise Linux 8 for IBM z Systems - HighAvailability Beta (RPMs)</span><br><span class="line">baseurl &#x3D; https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;redhat&#x2F;rhel&#x2F;rhel-8-beta&#x2F;add-ons&#x2F;ha&#x2F;s390x&#x2F;</span><br><span class="line">enabled &#x3D; 1</span><br><span class="line">gpgcheck &#x3D; 1</span><br><span class="line">gpgkey &#x3D; file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-beta,file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-release</span><br><span class="line"></span><br><span class="line">[rhel-8-for-x86_64-ha-beta-rpms]</span><br><span class="line">name &#x3D; Red Hat Enterprise Linux 8 for x86_64 - HighAvailability Beta (RPMs)</span><br><span class="line">baseurl &#x3D; https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;redhat&#x2F;rhel&#x2F;rhel-8-beta&#x2F;add-ons&#x2F;ha&#x2F;x86_64&#x2F;</span><br><span class="line">enabled &#x3D; 1</span><br><span class="line">gpgcheck &#x3D; 1</span><br><span class="line">gpgkey &#x3D; file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-beta,file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-release</span><br><span class="line"></span><br><span class="line">[rhel-8-rs-beta-source-rpms]</span><br><span class="line">name &#x3D; Red Hat Enterprise Linux 8 - ResilientStorage Beta (Source RPMs)</span><br><span class="line">baseurl &#x3D; https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;redhat&#x2F;rhel&#x2F;rhel-8-beta&#x2F;add-ons&#x2F;rs&#x2F;source&#x2F;</span><br><span class="line">enabled &#x3D; 1</span><br><span class="line">gpgcheck &#x3D; 1</span><br><span class="line">gpgkey &#x3D; file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-beta,file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-release</span><br><span class="line"></span><br><span class="line">[rhel-8-for-ppc64le-rs-beta-rpms]</span><br><span class="line">name &#x3D; Red Hat Enterprise Linux 8 for Power, little endian - ResilientStorage Beta (RPMs)</span><br><span class="line">baseurl &#x3D; https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;redhat&#x2F;rhel&#x2F;rhel-8-beta&#x2F;add-ons&#x2F;rs&#x2F;ppc64le&#x2F;</span><br><span class="line">enabled &#x3D; 1</span><br><span class="line">gpgcheck &#x3D; 1</span><br><span class="line">gpgkey &#x3D; file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-beta,file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-release</span><br><span class="line"></span><br><span class="line">[rhel-8-for-s390x-rs-beta-rpms]</span><br><span class="line">name &#x3D; Red Hat Enterprise Linux 8 for IBM z Systems - ResilientStorage Beta (RPMs)</span><br><span class="line">baseurl &#x3D; https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;redhat&#x2F;rhel&#x2F;rhel-8-beta&#x2F;add-ons&#x2F;rs&#x2F;s390x&#x2F;</span><br><span class="line">enabled &#x3D; 1</span><br><span class="line">gpgcheck &#x3D; 1</span><br><span class="line">gpgkey &#x3D; file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-beta,file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-release</span><br><span class="line"></span><br><span class="line">[rhel-8-for-x86_64-rs-beta-rpms]</span><br><span class="line">name &#x3D; Red Hat Enterprise Linux 8 for x86_64 - ResilientStorage Beta (RPMs)</span><br><span class="line">baseurl &#x3D; https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;redhat&#x2F;rhel&#x2F;rhel-8-beta&#x2F;add-ons&#x2F;rs&#x2F;x86_64&#x2F;</span><br><span class="line">enabled &#x3D; 1</span><br><span class="line">gpgcheck &#x3D; 1</span><br><span class="line">gpgkey &#x3D; file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-beta,file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-release</span><br><span class="line"></span><br><span class="line">[rhel-8-rt-beta-source-rpms]</span><br><span class="line">name &#x3D; Red Hat Enterprise Linux 8 - RT Beta (Source RPMs)</span><br><span class="line">baseurl &#x3D; https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;redhat&#x2F;rhel&#x2F;rhel-8-beta&#x2F;add-ons&#x2F;rt&#x2F;source&#x2F;</span><br><span class="line">enabled &#x3D; 1</span><br><span class="line">gpgcheck &#x3D; 1</span><br><span class="line">gpgkey &#x3D; file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-beta,file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-release</span><br><span class="line"></span><br><span class="line">[rhel-8-for-x86_64-rt-beta-rpms]</span><br><span class="line">name &#x3D; Red Hat Enterprise Linux 8 for x86_64 - RT Beta (RPMs)</span><br><span class="line">baseurl &#x3D; https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;redhat&#x2F;rhel&#x2F;rhel-8-beta&#x2F;add-ons&#x2F;rt&#x2F;x86_64&#x2F;</span><br><span class="line">enabled &#x3D; 1</span><br><span class="line">gpgcheck &#x3D; 1</span><br><span class="line">gpgkey &#x3D; file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-beta,file:&#x2F;&#x2F;&#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-redhat-release</span><br></pre></td></tr></table></figure><p>然后执行命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo yum clean all</span><br><span class="line">sudo yum makecache</span><br><span class="line">sudo yum update</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> 杂项 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>杂项/rhel8下的ftp配置</title>
      <link href="/2020/01/22/%E6%9D%82%E9%A1%B9/rhel8%E4%B8%8B%E7%9A%84ftp%E9%85%8D%E7%BD%AE/"/>
      <url>/2020/01/22/%E6%9D%82%E9%A1%B9/rhel8%E4%B8%8B%E7%9A%84ftp%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h1 id="服务安装"><a href="#服务安装" class="headerlink" title="服务安装"></a>服务安装</h1><p>安装</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install vsftpd ftp</span><br></pre></td></tr></table></figure><p>开机自启</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chkconfig vsftpd on</span><br></pre></td></tr></table></figure><p>防火墙设置</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo firewall-cmd --permanent --add-service=ftp</span><br><span class="line">sudo service firewalld restart</span><br></pre></td></tr></table></figure><h1 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h1><p>/etc/vsftpd/vsftpd.conf</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">#禁止匿名用户</span><br><span class="line">anonymous_enable&#x3D;NO</span><br><span class="line">#启用本地用户</span><br><span class="line">local_enable&#x3D;YES</span><br><span class="line">#启用写权限</span><br><span class="line">write_enable&#x3D;YES</span><br><span class="line">#用户上传文件的权限设置，反向</span><br><span class="line">local_umask&#x3D;000</span><br><span class="line">#根目录的设置</span><br><span class="line">local_root&#x3D;&#x2F;home&#x2F;share</span><br><span class="line">#显示目录说明文件</span><br><span class="line">dirmessage_enable&#x3D;YES</span><br><span class="line"></span><br><span class="line">xferlog_enable&#x3D;YES</span><br><span class="line"></span><br><span class="line">connect_from_port_20&#x3D;YES</span><br><span class="line"></span><br><span class="line">xferlog_std_format&#x3D;YES</span><br><span class="line">#将用户禁锢在主目录，主目录不能有W权限</span><br><span class="line">chroot_local_user&#x3D;YES</span><br><span class="line">#允许主目录有W权限</span><br><span class="line">allow_writeable_chroot&#x3D;YES</span><br><span class="line"></span><br><span class="line">listen&#x3D;YES</span><br><span class="line">#监听ip</span><br><span class="line">listen_address&#x3D;0.0.0.0</span><br><span class="line">#监听端口</span><br><span class="line">listen_port&#x3D;21</span><br><span class="line"></span><br><span class="line">listen_ipv6&#x3D;NO</span><br><span class="line"></span><br><span class="line">pam_service_name&#x3D;vsftpd</span><br><span class="line">#只允许出现在user_list中的用户访问，user_list文件需自行配置</span><br><span class="line">userlist_enable&#x3D;YES</span><br><span class="line">userlist_deny&#x3D;NO</span><br><span class="line"></span><br><span class="line">#被动模式，不设置则浏览器无法访问</span><br><span class="line">pasv_enable&#x3D;YES</span><br><span class="line">pasv_addr_resolve&#x3D;YES</span><br><span class="line">#配置端口范围</span><br><span class="line">pasv_min_port&#x3D;20020</span><br><span class="line">pasv_max_port&#x3D;20020</span><br><span class="line">#j监听地址</span><br><span class="line">pasv_address&#x3D;0.0.0.0</span><br><span class="line">#是否屏蔽对pasv的安全检查，ftp连接后有问题可以试试打开</span><br><span class="line">#pasv_promiscuous&#x3D;YES</span><br></pre></td></tr></table></figure><p>如果打算使用/sbin/nologin用户登录，需要在shells文件中添加一行<br>/sbin/nologin</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/shells</span><br></pre></td></tr></table></figure><p>打开对应端口</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo firewall-cmd --permanent --add-port=20020/tcp</span><br></pre></td></tr></table></figure><h1 id="重启"><a href="#重启" class="headerlink" title="重启"></a>重启</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service vsftpd restart</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> 杂项 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>杂项/Ubuntu下AS 的 gradle、jcenter设置</title>
      <link href="/2020/01/22/%E6%9D%82%E9%A1%B9/Ubuntu%E4%B8%8BAS%20%E7%9A%84%20gradle%E3%80%81jcenter%E8%AE%BE%E7%BD%AE/"/>
      <url>/2020/01/22/%E6%9D%82%E9%A1%B9/Ubuntu%E4%B8%8BAS%20%E7%9A%84%20gradle%E3%80%81jcenter%E8%AE%BE%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h1 id="gradle"><a href="#gradle" class="headerlink" title="gradle"></a>gradle</h1><p>下载AS sync时显示的gradle版本<br>下载地址：<a href="http://services.gradle.org/distributions/" target="_blank" rel="noopener">http://services.gradle.org/distributions/</a></p><p>将下载好的zip 文件放在~/.gradle/wrapper/dists/gradle-5.6.4-all/ankdp27end7byghfw1q2sw75f/   下，不用解压缩。（不同版本的gradle对应的目录不一样）<br>这样AS sync的时候就不会卡在下载gradle的时候了。</p><h1 id="jcenter"><a href="#jcenter" class="headerlink" title="jcenter"></a>jcenter</h1><p>修改项目根目录下面的build.gradle文件，将jcenter()库注释掉，添加阿里的maven库，同时保留Google的maven库地址即可。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; Top-level build file where you can add configuration options common to all sub-projects&#x2F;modules.</span><br><span class="line">buildscript &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        google()</span><br><span class="line">        &#x2F;&#x2F;jcenter()</span><br><span class="line">        maven&#123;url &#39;http:&#x2F;&#x2F;maven.aliyun.com&#x2F;nexus&#x2F;content&#x2F;groups&#x2F;public&#x2F;&#39;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    dependencies &#123;</span><br><span class="line">        classpath &#39;com.android.tools.build:gradle:3.5.1&#39;</span><br><span class="line">        &#x2F;&#x2F; NOTE: Do not place your application dependencies here; they belong</span><br><span class="line">        &#x2F;&#x2F; in the individual module build.gradle files</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">allprojects &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        google()</span><br><span class="line">        &#x2F;&#x2F;jcenter()</span><br><span class="line">        maven&#123;url &#39;http:&#x2F;&#x2F;maven.aliyun.com&#x2F;nexus&#x2F;content&#x2F;groups&#x2F;public&#x2F;&#39;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">task clean(type: Delete) &#123;</span><br><span class="line">    delete rootProject.buildDir</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> 杂项 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>杂项/使用putty远程登陆虚拟机以及传文件</title>
      <link href="/2020/01/22/%E6%9D%82%E9%A1%B9/%E4%BD%BF%E7%94%A8putty%E8%BF%9C%E7%A8%8B%E7%99%BB%E9%99%86%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%BB%A5%E5%8F%8A%E4%BC%A0%E6%96%87%E4%BB%B6/"/>
      <url>/2020/01/22/%E6%9D%82%E9%A1%B9/%E4%BD%BF%E7%94%A8putty%E8%BF%9C%E7%A8%8B%E7%99%BB%E9%99%86%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%BB%A5%E5%8F%8A%E4%BC%A0%E6%96%87%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h2 id="使用putty远程登陆虚拟机以及传文件"><a href="#使用putty远程登陆虚拟机以及传文件" class="headerlink" title="使用putty远程登陆虚拟机以及传文件"></a>使用putty远程登陆虚拟机以及传文件</h2><p>1、 安装SSHD: sudo apt-get install openssh-server<br>2、 连接虚拟机<br>3、 开始-&gt;运行-&gt;cmd，在windows下切换到pscp.exe 所在的位置。</p><p><strong>1</strong>、本地文件上传到远程服务器<br>命令：pscp 本机文件路径 root@ xxx.xxx.xxx.xxx:虚拟机路径<br><strong>2</strong>、本地目录以及目录中的文件上传到远程服务器<br> 命令：pscp -r 本机文件路径 root@ xxx.xxx.xxx.xxx:虚拟机路径<br> <strong>3</strong>、远程服务器中的文件下载到本地<br>命令：pscp  root@ xxx.xxx.xxx.xxx:虚拟机路径 本机路径<br><strong>4</strong>、远程服务器中的目录以及目录中的文件复制到本地<br>命令：pscp -r root@ xxx.xxx.xxx.xxx:虚拟机路径 本机文件路径</p>]]></content>
      
      
      
        <tags>
            
            <tag> 杂项 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>杂项/Linux jdk环境变量的配置</title>
      <link href="/2020/01/22/%E6%9D%82%E9%A1%B9/Linux%20jdk%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E7%9A%84%E9%85%8D%E7%BD%AE/"/>
      <url>/2020/01/22/%E6%9D%82%E9%A1%B9/Linux%20jdk%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E7%9A%84%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h1 id="谨慎操作"><a href="#谨慎操作" class="headerlink" title="谨慎操作"></a>谨慎操作</h1><p>将tar.gz文件解压缩到/usr/soft/中<br>然后在/etc/profile的最下方添加如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#java</span><br><span class="line">export JAVA_HOME&#x3D;&#x2F;usr&#x2F;soft&#x2F;jdk1.8.0_60</span><br><span class="line">export CLASSPATH&#x3D;.:$JAVAHOME&#x2F;lib&#x2F;dt.jar:$JAVA_HOME&#x2F;lib&#x2F;tools.jar</span><br><span class="line">export PATH&#x3D;$PATH:$JAVA_HOME&#x2F;bin</span><br></pre></td></tr></table></figure><p>JAVA_HOME是jdk的安装目录，要填上自己的安装目录</p><h1 id="提醒"><a href="#提醒" class="headerlink" title="提醒"></a>提醒</h1><p>Linux中的环境变量是以 : 分隔的，而不是windows下的 ;<br>Linux中引用另一个变量是用 $ ，而windows是用% %<br>设置PATH时不能覆盖掉原有的系统变量，不然就等着重装系统或者进救援模式吧。<br>注意大小写哦。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 杂项 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>有趣的编程实践/自己用c与c++混编写的一个打飞机程序</title>
      <link href="/2019/12/22/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E8%87%AA%E5%B7%B1%E7%94%A8c%E4%B8%8Ec++%E6%B7%B7%E7%BC%96%E5%86%99%E7%9A%84%E4%B8%80%E4%B8%AA%E6%89%93%E9%A3%9E%E6%9C%BA%E7%A8%8B%E5%BA%8F/"/>
      <url>/2019/12/22/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E8%87%AA%E5%B7%B1%E7%94%A8c%E4%B8%8Ec++%E6%B7%B7%E7%BC%96%E5%86%99%E7%9A%84%E4%B8%80%E4%B8%AA%E6%89%93%E9%A3%9E%E6%9C%BA%E7%A8%8B%E5%BA%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="游戏截图"><a href="#游戏截图" class="headerlink" title="游戏截图"></a>游戏截图</h1><p><img src="https://img-blog.csdnimg.cn/20190430130627792.?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk3MjkxMQ==,size_16,color_FFFFFF,t_70" alt="截图"></p><h1 id="游戏说明"><a href="#游戏说明" class="headerlink" title="游戏说明"></a>游戏说明</h1><ul><li>标准的W S A D 移动方式，空格射子弹，子弹数有限，击毁一架敌机+1。按P或Q暂停以及退出操作。</li><li>score:后是当前分数，zidan:是剩余的子弹数。</li><li>相关的游戏参数可在程序的宏定义处修改。<h1 id="源程序"><a href="#源程序" class="headerlink" title="源程序"></a>源程序</h1></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;conio.h&gt;</span><br><span class="line">#include&lt;windows.h&gt;</span><br><span class="line">#include&lt;ctime&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;algorithm&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">#define high 20//游戏高 </span><br><span class="line">#define wide 27//游戏宽 </span><br><span class="line">#define dijisu 5//敌机数 </span><br><span class="line">#define v0 24//敌机速度（越大越小）</span><br><span class="line">#define ZZ 30//初始子弹数 </span><br><span class="line">int wox,woy;</span><br><span class="line">struct zidanjih</span><br><span class="line">&#123;</span><br><span class="line">int y;</span><br><span class="line">int x;</span><br><span class="line">&#125;zid[high],dij[dijisu];</span><br><span class="line">struct Rule</span><br><span class="line">&#123;</span><br><span class="line">bool operator()(<span class="keyword">const</span> zidanjih &amp;S1,<span class="keyword">const</span> zidanjih &amp;S2)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> S1.y&gt;S2.y;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line">int ming;</span><br><span class="line">int score;</span><br><span class="line">int speed;<span class="comment">//敌机速度，越大越小 </span></span><br><span class="line">int z;</span><br><span class="line">char tu[high][wide];</span><br><span class="line"><span class="keyword">void</span> pr()</span><br><span class="line">&#123;</span><br><span class="line">HANDLE han=GetStdHandle(STD_OUTPUT_HANDLE);<span class="comment">//获取句柄</span></span><br><span class="line">COORD po;</span><br><span class="line">po.X=<span class="number">0</span>;</span><br><span class="line">po.Y=<span class="number">0</span>;</span><br><span class="line">SetConsoleCursorPosition(han,po);</span><br><span class="line"><span class="keyword">for</span>(int i=<span class="number">0</span>;i&lt;high;i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span>(int j=<span class="number">0</span>;j&lt;wide;j++)</span><br><span class="line">putchar(tu[i][j]);</span><br><span class="line">putchar(<span class="string">'\n'</span>);</span><br><span class="line">&#125;</span><br><span class="line">printf(<span class="string">"score: %d \tzidan: %d \n"</span>,score,z); </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> start()</span><br><span class="line">&#123;</span><br><span class="line">system(<span class="string">"cls"</span>); <span class="comment">//清屏</span></span><br><span class="line">speed=v0; </span><br><span class="line">memset(zid,<span class="number">0</span>,sizeof(zid));</span><br><span class="line">srand(time(NULL));</span><br><span class="line"><span class="keyword">for</span>(int i=<span class="number">0</span>;i&lt;dijisu;i++)</span><br><span class="line">&#123;</span><br><span class="line">dij[i].y=-i;</span><br><span class="line">dij[i].x=rand()%(wide<span class="number">-2</span>)+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">wox=wide/<span class="number">2</span>;</span><br><span class="line">woy=high<span class="number">-2</span>;</span><br><span class="line">ming=<span class="number">1</span>;</span><br><span class="line">score=<span class="number">0</span>;</span><br><span class="line">z=ZZ;</span><br><span class="line">CONSOLE_CURSOR_INFO inf=&#123;<span class="number">1</span>,<span class="number">0</span>&#125;;</span><br><span class="line">SetConsoleCursorInfo(GetStdHandle(STD_OUTPUT_HANDLE),&amp;inf);</span><br><span class="line"><span class="comment">/*初始化地图*/</span></span><br><span class="line"><span class="keyword">for</span>(int i=<span class="number">0</span>,j=<span class="number">0</span>;j&lt;wide;j++)</span><br><span class="line">tu[i][j]=<span class="string">'#'</span>;</span><br><span class="line"><span class="keyword">for</span>(int i=<span class="number">1</span>;i&lt;high<span class="number">-1</span>;i++)</span><br><span class="line">&#123;</span><br><span class="line">tu[i][<span class="number">0</span>]=<span class="string">'#'</span>;</span><br><span class="line">tu[i][wide<span class="number">-1</span>]=<span class="string">'#'</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(int j=<span class="number">0</span>;j&lt;wide;j++)</span><br><span class="line">tu[high<span class="number">-1</span>][j]=<span class="string">'#'</span>;</span><br><span class="line"><span class="keyword">for</span>(int i=<span class="number">1</span>;i&lt;=high<span class="number">-2</span>;i++)</span><br><span class="line"><span class="keyword">for</span>(int j=<span class="number">1</span>;j&lt;=wide<span class="number">-2</span>;j++)</span><br><span class="line">tu[i][j]=<span class="string">' '</span>;</span><br><span class="line">tu[woy][wox]=<span class="string">'+'</span>;</span><br><span class="line">pr();</span><br><span class="line">COORD po;</span><br><span class="line">po.X=(wide<span class="number">-13</span>)/<span class="number">2</span>+<span class="number">1</span>;</span><br><span class="line">po.Y=high/<span class="number">2</span>;</span><br><span class="line">SetConsoleCursorPosition(GetStdHandle(STD_OUTPUT_HANDLE),po);</span><br><span class="line">printf(<span class="string">"Loading......"</span>);</span><br><span class="line">Sleep(<span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> zide(int y,int x)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(y&gt;<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">int i;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;zid[i].y;i++);</span><br><span class="line">zid[i].y=y<span class="number">-1</span>;</span><br><span class="line">zid[i].x=x;</span><br><span class="line"><span class="keyword">if</span>(i)sort(zid,zid+high,Rule());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> shanghai()</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span>(int i=<span class="number">0</span>;i&lt;dijisu;i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span>(int j=<span class="number">0</span>;zid[j].y;j++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(dij[i].y==zid[j].y||dij[i].y==zid[j].y+<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(dij[i].x==zid[j].x)</span><br><span class="line">&#123;</span><br><span class="line">dij[i].y=<span class="number">-1</span>;</span><br><span class="line">dij[i].x=rand()%(wide<span class="number">-2</span>)+<span class="number">1</span>;</span><br><span class="line">zid[j].y=<span class="number">0</span>;</span><br><span class="line">sort(zid,zid+high,Rule());</span><br><span class="line">score++;</span><br><span class="line">z++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(dij[i].x==wox&amp;&amp;dij[i].y==woy)ming=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line">int within()</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(kbhit())</span><br><span class="line">&#123;</span><br><span class="line">char ch=getch();</span><br><span class="line"><span class="keyword">switch</span>(ch)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> <span class="string">'w'</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="string">'W'</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="number">72</span>:<span class="keyword">if</span>(woy&gt;<span class="number">1</span>)woy--;<span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">'s'</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="string">'S'</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="number">80</span>:<span class="keyword">if</span>(woy&lt;high<span class="number">-2</span>)woy++;<span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">'a'</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="string">'A'</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="number">75</span>:<span class="keyword">if</span>(wox&gt;<span class="number">1</span>)wox--;<span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">'d'</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="string">'D'</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="number">77</span>:<span class="keyword">if</span>(wox&lt;wide<span class="number">-2</span>)wox++;<span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">' '</span>:<span class="keyword">if</span>(z)&#123;zide(woy,wox);z--;&#125;<span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">'q'</span>: </span><br><span class="line"><span class="keyword">case</span> <span class="string">'p'</span>:<span class="keyword">return</span> <span class="number">1</span>; </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> without()</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span>(int i=<span class="number">1</span>;i&lt;high<span class="number">-1</span>;i++)</span><br><span class="line"><span class="keyword">for</span>(int j=<span class="number">1</span>;j&lt;wide<span class="number">-1</span>;j++)</span><br><span class="line">tu[i][j]=<span class="string">' '</span>; </span><br><span class="line">tu[woy][wox]=<span class="string">'+'</span>;</span><br><span class="line">shanghai();</span><br><span class="line"><span class="keyword">for</span>(int i=<span class="number">0</span>;i&lt;dijisu;i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(dij[i].y&gt;<span class="number">0</span>)tu[dij[i].y][dij[i].x]=<span class="string">'*'</span>;</span><br><span class="line"><span class="keyword">if</span>(!speed)dij[i].y++;</span><br><span class="line"><span class="keyword">if</span>(dij[i].y==high<span class="number">-1</span>)</span><br><span class="line">&#123;</span><br><span class="line">dij[i].y=<span class="number">0</span>;</span><br><span class="line">dij[i].x=rand()%(wide<span class="number">-2</span>)+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(!speed)speed=v0;</span><br><span class="line"><span class="keyword">for</span>(int i=<span class="number">0</span>;i&lt;high;i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(!zid[i].y)<span class="keyword">break</span>;</span><br><span class="line">tu[zid[i].y][zid[i].x]=<span class="string">'|'</span>;</span><br><span class="line">zid[i].y--;</span><br><span class="line">&#125;</span><br><span class="line">speed--;</span><br><span class="line">&#125;</span><br><span class="line">int youzidan()</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span>(int i=<span class="number">1</span>;i&lt;high<span class="number">-2</span>;i++)</span><br><span class="line"><span class="keyword">for</span>(int j=<span class="number">1</span>;j&lt;wide<span class="number">-1</span>;j++)</span><br><span class="line"><span class="keyword">if</span>(tu[i][j]==<span class="string">'|'</span>)<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">/*窗口最大化*/</span></span><br><span class="line">system(<span class="string">"title 打飞机"</span>);</span><br><span class="line">HWND <span class="built_in">window</span>;</span><br><span class="line"><span class="built_in">window</span>=FindWindow(NULL,<span class="string">"打飞机"</span>);</span><br><span class="line">ShowWindow(<span class="built_in">window</span>,SW_MAXIMIZE);</span><br><span class="line">HANDLE han=GetStdHandle(STD_OUTPUT_HANDLE);</span><br><span class="line">COORD po;</span><br><span class="line">CONSOLE_CURSOR_INFO inf=&#123;<span class="number">1</span>,<span class="number">0</span>&#125;;</span><br><span class="line">char a(<span class="string">'\0'</span>);</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">start();</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(!ming||(!z&amp;&amp;youzidan()))<span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">if</span>(within())</span><br><span class="line">&#123;</span><br><span class="line">po.X=(wide<span class="number">-29</span>)/<span class="number">2</span>+<span class="number">1</span>;</span><br><span class="line">po.Y=high/<span class="number">2</span>;</span><br><span class="line">SetConsoleCursorPosition(han,po);</span><br><span class="line">printf(<span class="string">"Game pause!按q退出，按p继续。"</span>);</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">a=getch();</span><br><span class="line"><span class="keyword">if</span>(a==<span class="string">'p'</span>||a==<span class="string">'q'</span>)<span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">SetConsoleCursorInfo(han,&amp;inf);</span><br><span class="line"><span class="keyword">if</span>(a==<span class="string">'q'</span>)<span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">without();</span><br><span class="line">pr();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(a==<span class="string">'q'</span>)<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">po.X=(wide<span class="number">-28</span>)/<span class="number">2</span>;</span><br><span class="line">po.Y=high/<span class="number">2</span>;</span><br><span class="line">SetConsoleCursorPosition(han,po);</span><br><span class="line">printf(<span class="string">"Game Over!按q退出，按p继续。"</span>);</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">a=getch();</span><br><span class="line"><span class="keyword">if</span>(a==<span class="string">'q'</span>)<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(a==<span class="string">'p'</span>)<span class="keyword">break</span>; </span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h1><ul><li>如果是用VC编译器，编译可能会报错，建议使用Dev-C或Code::Blocks。</li><li>如果发现程序有Bug，欢迎在评论区留言。</li><li>如果喜欢这篇文章，记得点个赞哦。(&gt;▽&lt;)</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> 有趣的编程实践 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>有趣的编程实践/用Java把图片编码成字符串</title>
      <link href="/2019/12/22/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E7%94%A8Java%E6%8A%8A%E5%9B%BE%E7%89%87%E7%BC%96%E7%A0%81%E6%88%90%E5%AD%97%E7%AC%A6%E4%B8%B2/"/>
      <url>/2019/12/22/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E7%94%A8Java%E6%8A%8A%E5%9B%BE%E7%89%87%E7%BC%96%E7%A0%81%E6%88%90%E5%AD%97%E7%AC%A6%E4%B8%B2/</url>
      
        <content type="html"><![CDATA[<h1 id="目的"><a href="#目的" class="headerlink" title="目的"></a>目的</h1><p>直接把图片以二进制存到数据库中不太合适，存放路径又不方便管理。<br>若是把图片编码存入，再译码取出。不仅便于管理，也减少了信息泄露的风险。</p><h1 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Base64;</span><br><span class="line"><span class="keyword">import</span> javax.imageio.ImageIO;</span><br><span class="line"><span class="keyword">import</span> java.awt.image.BufferedImage;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Img</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">private</span> Base64.Decoder decoder = Base64.getDecoder();</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">private</span> Base64.Encoder encoder = Base64.getEncoder();</span><br><span class="line">    <span class="comment">//编码图片</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">encodeFile</span><span class="params">(<span class="keyword">byte</span>[] bytes)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> encoder.encodeToString(bytes);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//编码图片</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">encodeFile</span><span class="params">(InputStream in)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        String s = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"读取图片..."</span>);</span><br><span class="line">            BufferedImage bi = ImageIO.read(in);</span><br><span class="line">            ByteArrayOutputStream baos = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line">            ImageIO.write(bi, <span class="string">"png"</span>, baos);</span><br><span class="line">            <span class="keyword">byte</span>[] bytes = baos.toByteArray();</span><br><span class="line">            System.out.println(<span class="string">"编码..."</span>);</span><br><span class="line">            s = encoder.encodeToString(bytes);</span><br><span class="line">            baos.close();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span>(IOException e) &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> s;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//编码图片</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">encodeFile</span><span class="params">(String path)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        String s = <span class="keyword">null</span>;</span><br><span class="line">        File file = <span class="keyword">new</span> File(path);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            BufferedImage bi = ImageIO.read(file);</span><br><span class="line">            ByteArrayOutputStream baos = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line">            ImageIO.write(bi, <span class="string">"png"</span>, baos);         <span class="comment">//把图片的二进制编码传入字节流</span></span><br><span class="line">            <span class="keyword">byte</span>[] bytes = baos.toByteArray();</span><br><span class="line">            s = encoder.encodeToString(bytes);      <span class="comment">//编码成字符串</span></span><br><span class="line">            <span class="comment">//System.out.println(s);</span></span><br><span class="line">            baos.close();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span>(IOException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">"找不到文件!!!"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> s;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//译码图片</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">byte</span>[] decodeFile(String s)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span>  decoder.decode(s);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//写出图片文件，写入path路径下</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">loadFile</span><span class="params">(String imag_bytes, String path)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">byte</span>[] bytes = decoder.decode(imag_bytes);       <span class="comment">//把字符串译码为二进制</span></span><br><span class="line">            ByteArrayInputStream bais = <span class="keyword">new</span> ByteArrayInputStream(bytes);</span><br><span class="line">            BufferedImage bi = ImageIO.read(bais);</span><br><span class="line"></span><br><span class="line">            File w2 = <span class="keyword">new</span> File(path);</span><br><span class="line">            ImageIO.write(bi, <span class="string">"png"</span>, w2);           <span class="comment">//写文件</span></span><br><span class="line"></span><br><span class="line">            bais.close();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span>(IOException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">"写入图片文件失败!!!"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//编码</span></span><br><span class="line">String s = Img.encodeFile(<span class="string">"图片路径/输入流/byte数组"</span>);</span><br><span class="line"><span class="comment">//译码</span></span><br><span class="line"><span class="keyword">byte</span>[] bytes = Img.decodeFile(s);</span><br><span class="line"><span class="comment">//写入文件</span></span><br><span class="line">Img.loadFile(s, <span class="string">"保存图片的路径"</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h1><p>这个类是为png格式的图片编写的<br>要支持其它格式，只要改一下 ImageIO.write() 函数中的 “png” 参数就行</p>]]></content>
      
      
      
        <tags>
            
            <tag> 有趣的编程实践 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>有趣的编程实践/Java连接MySQL</title>
      <link href="/2019/12/22/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/Java%E8%BF%9E%E6%8E%A5MySQL/"/>
      <url>/2019/12/22/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/Java%E8%BF%9E%E6%8E%A5MySQL/</url>
      
        <content type="html"><![CDATA[<h1 id="第三方的jar包"><a href="#第三方的jar包" class="headerlink" title="第三方的jar包"></a>第三方的jar包</h1><p>我用的是 mysql-connector-java-8.0.18.jar<br>请根据自己的MySQL版本选择适合自己的jar<br><a href="https://dev.mysql.com/downloads/connector/j/" target="_blank" rel="noopener">下载地址</a></p><h1 id="引入"><a href="#引入" class="headerlink" title="引入"></a>引入</h1><p>新版的应该是用第一种</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Class.forName(<span class="string">"com.mysql.cj.jdbc.Driver"</span>);</span><br></pre></td></tr></table></figure><p>旧版的可能要用第二种</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br></pre></td></tr></table></figure><h1 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h1><p>根据自己的情况修改参数</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Mysql</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String user = <span class="string">"user"</span>;</span><br><span class="line">    <span class="keyword">private</span> String password = <span class="string">"password"</span>;</span><br><span class="line">    <span class="keyword">private</span> String dbname = <span class="string">"databasename"</span>;</span><br><span class="line">    <span class="keyword">private</span> String uri = <span class="string">"jdbc:mysql://127.0.0.1:3306/"</span>+dbname+<span class="string">"?useSSL=true&amp;characterEncoding=utf-8"</span>;</span><br><span class="line">    <span class="keyword">private</span> Connection connection;</span><br><span class="line">    <span class="keyword">private</span> Statement sql;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Mysql</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(<span class="string">"com.mysql.cj.jdbc.Driver"</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">"连接mysql..."</span>);</span><br><span class="line">                connection = DriverManager.getConnection(uri, user, password); <span class="comment">//连接数据库</span></span><br><span class="line">                connection.setAutoCommit(<span class="keyword">false</span>);                               <span class="comment">//关闭自动提交模式</span></span><br><span class="line">                sql = connection.createStatement();                            <span class="comment">//创建查询接口</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span>(SQLException e) &#123;</span><br><span class="line">                connection = <span class="keyword">null</span>;</span><br><span class="line">                sql = <span class="keyword">null</span>;</span><br><span class="line">                System.out.println(<span class="string">"mysql连接失败!!!"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span>(ClassNotFoundException e) &#123;</span><br><span class="line">            connection = <span class="keyword">null</span>;</span><br><span class="line">            System.out.println(<span class="string">"mysql模块载入失败!!!"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">execute</span><span class="params">(String s)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            sql.execute(s);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span>(SQLException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">"sqlError："</span>+e);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">executeUpdate</span><span class="params">(String s)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            sql.executeUpdate(s);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span>(SQLException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">"sqlError："</span>+e);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lastID</span><span class="params">()</span>     <span class="comment">//获取自增值</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ResultSet rs = sql.executeQuery(<span class="string">"select LAST_INSERT_ID()"</span>);</span><br><span class="line">            <span class="keyword">if</span>(rs.next())</span><br><span class="line">            &#123;</span><br><span class="line">                n = rs.getInt(<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> n;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span>(SQLException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">"sqlError："</span>+e);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span>             <span class="comment">//关闭连接</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection.commit();</span><br><span class="line">            System.out.println(<span class="string">"断开数据库连接..."</span>);</span><br><span class="line">            sql.close();</span><br><span class="line">            connection.close();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span>(SQLException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">"sqlError："</span>+e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Mysql sql = <span class="keyword">new</span> Mysql();<span class="comment">//连接</span></span><br><span class="line">sql.executeUpdate(<span class="string">"SQL语句"</span>);</span><br><span class="line">sql.close();<span class="comment">//关闭连接</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>功能尚不完善</p>]]></content>
      
      
      
        <tags>
            
            <tag> 有趣的编程实践 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>有趣的编程实践/Java读取、解压缩zip文件</title>
      <link href="/2019/12/22/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/Java%E8%AF%BB%E5%8F%96%E3%80%81%E8%A7%A3%E5%8E%8B%E7%BC%A9zip%E6%96%87%E4%BB%B6/"/>
      <url>/2019/12/22/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/Java%E8%AF%BB%E5%8F%96%E3%80%81%E8%A7%A3%E5%8E%8B%E7%BC%A9zip%E6%96%87%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="读取"><a href="#读取" class="headerlink" title="读取"></a>读取</h1><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.zip.*;</span><br><span class="line"><span class="keyword">import</span> java.nio.charset.Charset;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">zipRead</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> ZipFile zipfile;</span><br><span class="line">    <span class="keyword">private</span> Charset charset;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">zipRead</span><span class="params">(File file)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"读取zip文件..."</span>);</span><br><span class="line">            zipfile = <span class="keyword">new</span> ZipFile(file);</span><br><span class="line">            charset = Charset.forName(<span class="string">"utf-8"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span>(IOException e) &#123;</span><br><span class="line">            zipfile = <span class="keyword">null</span>;</span><br><span class="line">            System.out.println(<span class="string">"文件不存在!!!"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">zipRead</span><span class="params">(String path)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"读取zip文件..."</span>);</span><br><span class="line">            zipfile = <span class="keyword">new</span> ZipFile(path);</span><br><span class="line">            charset = Charset.forName(<span class="string">"utf-8"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span>(IOException e) &#123;</span><br><span class="line">            zipfile = <span class="keyword">null</span>;</span><br><span class="line">            System.out.println(<span class="string">"文件不存在!!!"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCharset</span><span class="params">(String charset)</span>      <span class="comment">//改编码</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.charset = Charset.forName(charset);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isExists</span><span class="params">(String name)</span>       <span class="comment">//测试zip中name文件是否存在</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        ZipEntry entry = zipfile.getEntry(name);</span><br><span class="line">        <span class="keyword">if</span>(entry!=<span class="keyword">null</span>)<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getSize</span><span class="params">(String name)</span>            <span class="comment">//返回文件大小B</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        ZipEntry entry = zipfile.getEntry(name);</span><br><span class="line">        <span class="keyword">if</span>(entry==<span class="keyword">null</span>)<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> entry.getSize();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getContent</span><span class="params">(String name)</span>      <span class="comment">//获取zip文件中name文件的文本内容，去除头和尾的空白字符</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        String s = <span class="string">""</span>;</span><br><span class="line">        ZipEntry entry = zipfile.getEntry(name);</span><br><span class="line">        <span class="keyword">if</span>(entry==<span class="keyword">null</span>)<span class="keyword">return</span> s;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            InputStreamReader ir = <span class="keyword">new</span> InputStreamReader(zipfile.getInputStream(entry), charset);</span><br><span class="line">            BufferedReader rd = <span class="keyword">new</span> BufferedReader(ir);</span><br><span class="line">            String tap = <span class="keyword">null</span>;</span><br><span class="line">            <span class="keyword">while</span>((tap=rd.readLine())!=<span class="keyword">null</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                s += tap+<span class="string">"\n"</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            s = s.trim();</span><br><span class="line">            rd.close();</span><br><span class="line">            ir.close();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span>(IOException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">"在zip中找不到文件!!!"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> s;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">byte</span>[] getBytes(String name)     <span class="comment">//获取zip中name文件的字节流</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">byte</span>[] bytes = <span class="keyword">null</span>;</span><br><span class="line">        ZipEntry entry = zipfile.getEntry(name);</span><br><span class="line">        <span class="keyword">if</span>(entry==<span class="keyword">null</span>)<span class="keyword">return</span> bytes;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            InputStream in = zipfile.getInputStream(entry);</span><br><span class="line">            ByteArrayOutputStream out = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line">            <span class="keyword">byte</span>[] tap = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>*<span class="number">10</span>];</span><br><span class="line">            <span class="keyword">int</span> n = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span>((n=in.read(tap))!=-<span class="number">1</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                out.write(tap, <span class="number">0</span>, n);</span><br><span class="line">            &#125;</span><br><span class="line">            bytes = out.toByteArray();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span>(IOException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">"无法读出输入流!!!"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> bytes;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> InputStream <span class="title">getInputStream</span><span class="params">(String name)</span>      <span class="comment">//获取zip文件中name文件的输入流</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        InputStream in = <span class="keyword">null</span>;</span><br><span class="line">        ZipEntry entry = zipfile.getEntry(name);</span><br><span class="line">        <span class="keyword">if</span>(entry==<span class="keyword">null</span>)<span class="keyword">return</span> in;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            in = zipfile.getInputStream(entry);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span>(IOException e) &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> in;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span>         <span class="comment">//关闭zip文件</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            zipfile.close();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span>(IOException e ) &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">zipRead read = <span class="keyword">new</span> zipRead(<span class="string">"文件路径"</span>);<span class="comment">//初始化</span></span><br><span class="line">read.setCharset(<span class="string">"GB2312"</span>);<span class="comment">//设定编码。默认utf-8</span></span><br><span class="line">read.函数调用(参数);</span><br><span class="line">read.close();<span class="comment">//关闭文件</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="解压缩"><a href="#解压缩" class="headerlink" title="解压缩"></a>解压缩</h1><h2 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line"><span class="keyword">import</span> java.util.zip.ZipEntry;</span><br><span class="line"><span class="keyword">import</span> java.util.zip.ZipFile;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">unzip</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">//把zip解压缩到path下</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">unzipByFile</span><span class="params">(File file, String path)</span>   <span class="comment">//path后无/</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ZipFile zip = <span class="keyword">new</span> ZipFile(file);</span><br><span class="line">            <span class="keyword">for</span>(Enumeration&lt;?&gt; entries = zip.entries(); entries.hasMoreElements(); )</span><br><span class="line">            &#123;</span><br><span class="line">                ZipEntry entry = (ZipEntry)entries.nextElement();</span><br><span class="line">                String name = entry.getName();</span><br><span class="line">                System.out.println(<span class="string">"解压："</span>+name);</span><br><span class="line">                <span class="keyword">if</span>(entry.isDirectory())</span><br><span class="line">                &#123;</span><br><span class="line">                    File dir = <span class="keyword">new</span> File(path+File.separator+name);</span><br><span class="line">                    dir.mkdir();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> </span><br><span class="line">                &#123;</span><br><span class="line">                    File unfile = <span class="keyword">new</span> File(path+File.separator+name);</span><br><span class="line">                    <span class="keyword">if</span>(!unfile.getParentFile().exists())unfile.getParentFile().mkdir();</span><br><span class="line">                    unfile.createNewFile();</span><br><span class="line">                    InputStream in = zip.getInputStream(entry);</span><br><span class="line">                    FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(unfile);</span><br><span class="line">                    <span class="keyword">int</span> len;</span><br><span class="line">                    <span class="keyword">byte</span>[] buf = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">                    <span class="keyword">while</span>((len=in.read(buf))!=-<span class="number">1</span>)fos.write(buf, <span class="number">0</span>, len);</span><br><span class="line">                    fos.close();</span><br><span class="line">                    in.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            zip.close();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span>(IOException e) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-1"><a href="#使用-1" class="headerlink" title="使用"></a>使用</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">File file = <span class="keyword">new</span> File(<span class="string">"文件路径"</span>);</span><br><span class="line">unzip.unzipByFile(file, <span class="string">"（解压到）某文件夹的路径"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>(IOException e) &#123;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> 有趣的编程实践 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>有趣的编程实践/用Java连接ftp</title>
      <link href="/2019/12/22/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E7%94%A8Java%E8%BF%9E%E6%8E%A5ftp/"/>
      <url>/2019/12/22/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E7%94%A8Java%E8%BF%9E%E6%8E%A5ftp/</url>
      
        <content type="html"><![CDATA[<h1 id="使用第三方jar包"><a href="#使用第三方jar包" class="headerlink" title="使用第三方jar包"></a>使用第三方jar包</h1><p>包名：commons-net-3.6.jar</p><p><a href="http://mirror.bit.edu.cn/apache//commons/net/binaries/commons-net-3.6-bin.zip" target="_blank" rel="noopener">下载地址</a></p><h1 id="引入方式"><a href="#引入方式" class="headerlink" title="引入方式"></a>引入方式</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.commons.net.ftp.*;</span><br></pre></td></tr></table></figure><h1 id="源代码"><a href="#源代码" class="headerlink" title="源代码"></a>源代码</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.SocketException;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.net.ftp.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FTP</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> FTPClient ftpclient;        <span class="comment">//ftp连接对象</span></span><br><span class="line">    <span class="keyword">private</span> String ip, user, password;  <span class="comment">//ftp服务器的ip，用户名，密码</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> port;                   <span class="comment">//ftp服务器的端口</span></span><br><span class="line">    <span class="comment">//初始化</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">FTP</span><span class="params">(String ip,<span class="keyword">int</span> port, String user, String password)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.ip = ip;</span><br><span class="line">        <span class="keyword">this</span>.port = port;</span><br><span class="line">        <span class="keyword">this</span>.user = user;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//连接并获取FTPClient对象</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> FTPClient <span class="title">getFTPClient</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        FTPClient ftpclient = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ftpclient = <span class="keyword">new</span> FTPClient();</span><br><span class="line">            System.out.println(<span class="string">"连接ftp服务器..."</span>);</span><br><span class="line">            ftpclient.connect(ip, port);</span><br><span class="line">            <span class="keyword">if</span>(!FTPReply.isPositiveCompletion(ftpclient.getReplyCode()))</span><br><span class="line">            &#123;</span><br><span class="line">                System.out.println(<span class="string">"连接失败!!!"</span>);</span><br><span class="line">                ftpclient.disconnect();</span><br><span class="line">                ftpclient = <span class="keyword">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                System.out.println(<span class="string">"登陆ftp服务器..."</span>);</span><br><span class="line">                <span class="keyword">if</span>(!ftpclient.login(user, password))</span><br><span class="line">                &#123;</span><br><span class="line">                    System.out.println(<span class="string">"登陆失败!!!"</span>);</span><br><span class="line">                    ftpclient.logout();</span><br><span class="line">                    ftpclient.disconnect();</span><br><span class="line">                    ftpclient = <span class="keyword">null</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> </span><br><span class="line">                &#123;</span><br><span class="line">                    ftpclient.setControlEncoding(<span class="string">"utf-8"</span>);      <span class="comment">//更改控制台的编码</span></span><br><span class="line">                    ftpclient.setFileType(FTPClient.BINARY_FILE_TYPE);  <span class="comment">//设置为字节传输</span></span><br><span class="line">                    ftpclient.enterLocalPassiveMode();      <span class="comment">//使用被动模式</span></span><br><span class="line">                    System.out.println(<span class="string">"FTP连接已建立"</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span>(SocketException e) &#123;</span><br><span class="line">            System.out.println(e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span>(IOException e) &#123;</span><br><span class="line">            System.out.println(e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ftpclient;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//断开连接</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">breakConnect</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(ftpclient.isConnected())</span><br><span class="line">            &#123;</span><br><span class="line">                System.out.println(<span class="string">"断开连接..."</span>);</span><br><span class="line">                ftpclient.logout();</span><br><span class="line">                ftpclient.disconnect();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span>(IOException e) &#123;</span><br><span class="line">            System.out.println(e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">finally</span> &#123;</span><br><span class="line">            ftpclient = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//返回服务器的ftpPath路径下的所有文件名 s[0]放目录名，s[1]放文件名</span></span><br><span class="line">    <span class="keyword">public</span> String[][] getListFiles(String ftpPath)</span><br><span class="line">    &#123;</span><br><span class="line">        FTPFile[] files = <span class="keyword">null</span>;</span><br><span class="line">        String[][] s = <span class="keyword">null</span>;</span><br><span class="line">        ftpclient = getFTPClient();</span><br><span class="line">        <span class="keyword">if</span>(ftpclient==<span class="keyword">null</span>) <span class="keyword">return</span> s;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"定位到指定文件夹..."</span>);</span><br><span class="line">            <span class="keyword">if</span>(!ftpclient.changeWorkingDirectory(ftpPath))</span><br><span class="line">            &#123;</span><br><span class="line">                System.out.println(<span class="string">"定位ftp目录失败!!!"</span>);</span><br><span class="line">                breakConnect();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> </span><br><span class="line">            &#123;</span><br><span class="line">                System.out.println(<span class="string">"获取文件列表..."</span>);</span><br><span class="line">                files = ftpclient.listFiles();</span><br><span class="line">                String file = <span class="string">""</span>;</span><br><span class="line">                String dire = <span class="string">""</span>;</span><br><span class="line">                <span class="keyword">for</span>(FTPFile f: files)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span>(f.isFile()) file += f.getName()+<span class="string">"/"</span>;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">if</span>(f.isDirectory()) dire += f.getName()+<span class="string">"/"</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                s = <span class="keyword">new</span> String[<span class="number">2</span>][];</span><br><span class="line">                s[<span class="number">1</span>] = file.split(<span class="string">"/"</span>);</span><br><span class="line">                s[<span class="number">0</span>] = dire.split(<span class="string">"/"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span>(IOException e) &#123;</span><br><span class="line">            System.out.println(e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> s;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//把本地的文件upfile上传到ftp服务器的ftpPath路径下，命名为filename，找不到目录并且makeDir为true则会根据ftpPath建立目录</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">uploadFile</span><span class="params">(String ftpPath, String filename, File upfile, <span class="keyword">boolean</span> makeDir)</span> </span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> flag = <span class="keyword">false</span>;</span><br><span class="line">        FileInputStream input = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"建立上传文件流..."</span>);</span><br><span class="line">            input = <span class="keyword">new</span> FileInputStream(upfile);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span>(IOException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">"文件上传流建立失败!!!"</span>);</span><br><span class="line">            input = <span class="keyword">null</span>;</span><br><span class="line">            System.out.println(e);</span><br><span class="line">            <span class="keyword">return</span> flag;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ftpclient = getFTPClient();     <span class="comment">//连接</span></span><br><span class="line">            <span class="keyword">if</span>(ftpclient==<span class="keyword">null</span>)     <span class="comment">//连接失败</span></span><br><span class="line">            &#123;</span><br><span class="line">                input.close();</span><br><span class="line">                <span class="keyword">return</span> flag;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">"定位到指定文件夹..."</span>);</span><br><span class="line">            <span class="keyword">if</span>(!ftpclient.changeWorkingDirectory(ftpPath))      <span class="comment">//更改ftp的目录</span></span><br><span class="line">            &#123;</span><br><span class="line">                System.out.println(<span class="string">"定位ftp目录失败!!!"</span>);</span><br><span class="line">                <span class="keyword">if</span>(makeDir)     <span class="comment">//更改失败则级联创建目录</span></span><br><span class="line">                &#123;</span><br><span class="line">                    System.out.printf(<span class="string">"建立目录中... "</span>);</span><br><span class="line">                    ftpclient.changeWorkingDirectory(<span class="string">"/"</span>);</span><br><span class="line">                    String[] dirs = ftpPath.split(<span class="string">"/"</span>);</span><br><span class="line">                    <span class="keyword">for</span>(String dir: dirs)       <span class="comment">//找不到文件夹</span></span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="keyword">if</span>(dir!=<span class="string">""</span>&amp;&amp;dir!=<span class="keyword">null</span>)</span><br><span class="line">                        &#123;</span><br><span class="line">                            System.out.print(<span class="string">"/"</span>+dir);</span><br><span class="line">                            ftpclient.makeDirectory(dir);   <span class="comment">//创建目录</span></span><br><span class="line">                            ftpclient.changeWorkingDirectory(dir);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>        <span class="comment">//不创建目录</span></span><br><span class="line">                &#123;</span><br><span class="line">                    input.close();</span><br><span class="line">                    <span class="keyword">return</span> flag;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">"写入文件到ftp："</span>+ftpPath+<span class="string">"/"</span>+filename+<span class="string">"  ..."</span>);</span><br><span class="line">            <span class="keyword">if</span>(ftpclient.storeFile(filename, input)) flag = <span class="keyword">true</span>;  <span class="comment">//将input文件流写到服务器，filename为保存后的文件名</span></span><br><span class="line">            </span><br><span class="line">            <span class="keyword">else</span> System.out.println(<span class="string">"文件写入失败!!!"</span>);</span><br><span class="line">            </span><br><span class="line">            input.close();</span><br><span class="line">            <span class="comment">//ftpclient.completePendingCommand();</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span>(IOException e) &#123;</span><br><span class="line">            System.out.println(e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">finally</span> &#123;</span><br><span class="line">            breakConnect();</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> flag;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//从ftp服务器的ftpPath路径下下载ftpFileName，保存到本地的localPath下，命名为localFileName</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> File <span class="title">downloadFile</span><span class="params">(String ftpPath, String ftpFileName, String localPath, String localFileName)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        File down = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ftpclient = getFTPClient();</span><br><span class="line">            <span class="keyword">if</span>(ftpclient==<span class="keyword">null</span>) <span class="keyword">return</span> down;</span><br><span class="line">            System.out.println(<span class="string">"定位到指定文件夹..."</span>);</span><br><span class="line">            <span class="keyword">if</span>(!ftpclient.changeWorkingDirectory(ftpPath))      <span class="comment">//切换服务器的路径</span></span><br><span class="line">            &#123;</span><br><span class="line">                System.out.println(<span class="string">"定位ftp目录失败!!!"</span>);</span><br><span class="line">                breakConnect();</span><br><span class="line">                <span class="keyword">return</span> down;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            down = <span class="keyword">new</span> File(localPath+File.separator+localFileName);    <span class="comment">//设定本地路径及文件名</span></span><br><span class="line">            OutputStream os = <span class="keyword">new</span> FileOutputStream(down);   <span class="comment">//实例化输出流</span></span><br><span class="line">            System.out.println(<span class="string">"写入文件到本地："</span>+down.toPath()+<span class="string">"  ..."</span>);</span><br><span class="line">            <span class="keyword">if</span>(!ftpclient.retrieveFile(ftpFileName, os))    <span class="comment">//写入文件</span></span><br><span class="line">            &#123;</span><br><span class="line">                System.out.println(<span class="string">"文件写入失败!!!"</span>);</span><br><span class="line">                os.close();</span><br><span class="line">                down.delete();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> os.close();</span><br><span class="line">            <span class="comment">//breakConnect();</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span>(IOException e) &#123;</span><br><span class="line">            System.out.println(e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">finally</span> &#123;</span><br><span class="line">            breakConnect();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> down;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//删除ftp服务器下的ftpFileName文件</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">deleteFile</span><span class="params">(String ftpPath, String ftpFileName)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> flag = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ftpclient = getFTPClient();</span><br><span class="line">            <span class="keyword">if</span>(ftpclient==<span class="keyword">null</span>) <span class="keyword">return</span> flag;</span><br><span class="line">            System.out.println(<span class="string">"定位到指定文件夹..."</span>);</span><br><span class="line">            <span class="keyword">if</span>(!ftpclient.changeWorkingDirectory(ftpPath))</span><br><span class="line">            &#123;</span><br><span class="line">                System.out.println(<span class="string">"定位ftp目录失败!!!"</span>);</span><br><span class="line">                <span class="comment">//breakConnect();</span></span><br><span class="line">                <span class="keyword">return</span> flag;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">"删除文件..."</span>);</span><br><span class="line">            <span class="keyword">if</span>(!ftpclient.deleteFile(ftpFileName))</span><br><span class="line">            &#123;</span><br><span class="line">                System.out.println(<span class="string">"文件删除失败!!!"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//ftpclient.completePendingCommand();</span></span><br><span class="line">            flag = <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span>(IOException e) &#123;</span><br><span class="line">            System.out.println(e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">finally</span> &#123;</span><br><span class="line">            breakConnect();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> flag;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//把ftp服务器ftpPath路径下的ftpFileName重命名为newName</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">renameFile</span><span class="params">(String ftpPath, String ftpFileName, String newName)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> flag = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ftpclient = getFTPClient();</span><br><span class="line">            <span class="keyword">if</span>(ftpclient==<span class="keyword">null</span>) <span class="keyword">return</span> flag;</span><br><span class="line">            System.out.println(<span class="string">"定位到指定文件夹..."</span>);</span><br><span class="line">            <span class="keyword">if</span>(!ftpclient.changeWorkingDirectory(ftpPath))</span><br><span class="line">            &#123;</span><br><span class="line">                System.out.println(<span class="string">"定位到ftp目录失败!!!"</span>);</span><br><span class="line">                <span class="keyword">return</span> flag;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">"重命名文件..."</span>);</span><br><span class="line">            <span class="keyword">if</span>(ftpclient.rename(ftpFileName, newName)) flag = <span class="keyword">true</span>;</span><br><span class="line">            <span class="keyword">else</span> System.out.println(<span class="string">"重命名文件失败!!!"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span>(IOException e) &#123;</span><br><span class="line">            System.out.println(e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">finally</span> &#123;</span><br><span class="line">            breakConnect();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> flag;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//提供IP、端口、用户名、密码</span></span><br><span class="line">FTP ftp = <span class="keyword">new</span> FTP(<span class="string">"127.0.0.1"</span>, <span class="number">21</span>, <span class="string">"user"</span>, <span class="string">"password"</span>);<span class="comment">//连接</span></span><br><span class="line"><span class="comment">//之后便可以</span></span><br><span class="line">ftp.某方法(参数);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> 有趣的编程实践 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
